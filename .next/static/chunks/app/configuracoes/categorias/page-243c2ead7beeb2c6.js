(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3105],{69014:function(e,t,r){Promise.resolve().then(r.bind(r,8858))},8858:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(3827),o=r(64090),n=r(20200),s=r(66651),i=r(70492),l=r(32278),c=r(53018);function d(){let{categorias:e,adicionarCategoria:t,atualizarCategoria:r,removerCategoria:d}=(0,c.D)(),{isOpen:u,openModal:f,closeModal:h}=(0,i.d)(),{isOpen:m,openModal:x,closeModal:p}=(0,i.d)(),[g,y]=(0,o.useState)(""),[v,b]=(0,o.useState)({id:"",nome:""}),[j,w]=(0,o.useState)(""),N=(0,o.useRef)(null),C=(e,t)=>{b({id:e,nome:t}),x()},k=e.filter(e=>e.nome.toLowerCase().includes(j.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Categorias de Produtos"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 grow",children:[(0,a.jsx)(s.default,{onClick:f,variant:"primary",children:"➕ Nova Categoria"}),(0,a.jsx)(s.default,{onClick:()=>{let t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download="categorias.json",o.click(),URL.revokeObjectURL(a)},variant:"secondary",children:"⬇️ Exportar"}),(0,a.jsx)(s.default,{onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},variant:"secondary",children:"⬆️ Importar"})]}),(0,a.jsx)("div",{className:"w-full sm:w-[220px]",children:(0,a.jsx)(l.default,{label:"",placeholder:"Buscar...",value:j,onChange:e=>w(e.target.value),className:"h-[38px]"})})]}),(0,a.jsx)("input",{type:"file",ref:N,className:"hidden",accept:"application/json",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!a)return;let o=new FileReader;o.onload=()=>{try{JSON.parse(o.result).forEach(e=>e.nome&&t(e.nome))}catch(e){console.error("Erro ao importar categorias",e)}},o.readAsText(a)}}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(n.ZP,{headers:["Nome","A\xe7\xf5es"],children:k.map(e=>(0,a.jsxs)(n.SC,{children:[(0,a.jsx)(n.pj,{children:e.nome}),(0,a.jsxs)(n.pj,{className:"flex items-center space-x-2",children:[(0,a.jsx)(s.default,{size:"sm",variant:"secondary",onClick:()=>C(e.id,e.nome),children:"✏️ Editar"}),(0,a.jsx)(s.default,{size:"sm",variant:"danger",onClick:()=>d(e.id),children:"\uD83D\uDDD1️ Excluir"})]})]},e.id))})}),(0,a.jsx)(i.Z,{isOpen:u,onClose:h,title:"Nova Categoria",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(g.trim()),y(""),h()},className:"space-y-4",children:[(0,a.jsx)(l.default,{label:"Nome",value:g,onChange:e=>y(e.target.value),required:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(s.default,{type:"button",variant:"secondary",onClick:h,children:"Cancelar"}),(0,a.jsx)(s.default,{type:"submit",variant:"primary",children:"Salvar"})]})]})}),(0,a.jsx)(i.Z,{isOpen:m,onClose:p,title:"Editar Categoria",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(v.id,v.nome.trim()),p()},className:"space-y-4",children:[(0,a.jsx)(l.default,{label:"Nome",value:v.nome,onChange:e=>b({...v,nome:e.target.value}),required:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(s.default,{type:"button",variant:"secondary",onClick:p,children:"Cancelar"}),(0,a.jsx)(s.default,{type:"submit",variant:"primary",children:"Salvar"})]})]})})]})}},66651:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(3827),o=r(64090),n=r(76371),s=r(49769),i=r(22169);let l=(0,s.j)("inline-flex items-center justify-center rounded-2xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:o,size:s,className:r})),ref:t,...d})});c.displayName="Button"},32278:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var a=r(3827),o=r(64090),n=r(22169);let s=o.forwardRef((e,t)=>{let{className:r,type:o,...s}=e;return(0,a.jsx)("input",{type:o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},70492:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});var a=r(3827),o=r(64090);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,r]=(0,o.useState)(e);return{isOpen:t,openModal:()=>r(!0),closeModal:()=>r(!1),toggleModal:()=>r(!t)}};t.Z=e=>{let{isOpen:t,onClose:r,title:n,children:s,footer:i,size:l="md"}=e,[c,d]=(0,o.useState)(!1);return((0,o.useEffect)(()=>(t?(d(!0),document.body.style.overflow="hidden"):(setTimeout(()=>{d(!1)},200),document.body.style.overflow="auto"),()=>{document.body.style.overflow="auto"}),[t]),c||t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 ".concat(t?"opacity-100":"opacity-0"," transition-opacity duration-200"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]," z-10 ").concat(t?"translate-y-0":"translate-y-4"," transition-transform duration-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:n}),(0,a.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:r,children:[(0,a.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:s}),i&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",style:{borderColor:"var(--cor-borda)"},children:i})]})]}):null}},20200:function(e,t,r){"use strict";r.d(t,{SC:function(){return n},pj:function(){return s}});var a=r(3827),o=r(64090);let n=e=>{let{children:t,className:r="",...o}=e;return(0,a.jsx)("tr",{className:"odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ".concat(r),...o,children:t})},s=e=>{let{children:t,className:r="",compact:o=!1}=e;return(0,a.jsx)("td",{className:"".concat(o?"px-2 py-2":"px-6 py-4"," text-sm ").concat(r),style:{color:"var(--cor-texto-secundario)"},children:t})};t.ZP=e=>{let{headers:t,children:r,className:n="",emptyMessage:s="Nenhum dado encontrado",isLoading:i=!1}=e;return(0,a.jsx)("div",{className:"w-full overflow-x-hidden rounded-lg border ".concat(n),style:{borderColor:"var(--cor-borda)"},children:(0,a.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsx)("tr",{children:t.map((e,t)=>(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},t))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:i?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"ml-2",children:"Carregando..."})]})})}):o.Children.count(r)>0?r:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:s})})})]})})}},32355:function(e,t,r){"use strict";r.d(t,{g:function(){return a},x:function(){return o}});let a=()=>{var e,t;let r=null===(t=document.cookie)||void 0===t?void 0:null===(e=t.split("; ").find(e=>e.startsWith("sb-access-token=")))||void 0===e?void 0:e.split("=")[1];return{Authorization:r?"Bearer ".concat(r):""}},o={get:async e=>await fetch(e,{method:"GET",headers:{...a(),"Content-Type":"application/json"}}),post:async(e,t)=>await fetch(e,{method:"POST",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(t)}),put:async(e,t)=>await fetch(e,{method:"PUT",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(t)}),delete:async e=>await fetch(e,{method:"DELETE",headers:{...a(),"Content-Type":"application/json"}})}},53018:function(e,t,r){"use strict";r.d(t,{D:function(){return i},u:function(){return l}});var a=r(64090),o=r(32355);let n=async()=>{try{console.log("\uD83D\uDD0D Buscando categorias de produtos...");let e=await fetch("/api/categorias",{headers:(0,o.g)()});if(console.log("\uD83D\uDCE1 Response status: ".concat(e.status)),!e.ok){let t=await e.text();throw console.error("❌ Erro na API categorias: ".concat(e.status," - ").concat(t)),Error("Erro ao buscar categorias: ".concat(e.status))}let t=await e.json();return console.log("✅ Categorias carregadas: ".concat(t.length)),t}catch(e){return console.error("❌ Erro ao buscar categorias da API:",e),[]}},s=[{id:"hortifruti",nome:"Hortifruti"},{id:"carnes",nome:"Carnes"},{id:"laticinios",nome:"Latic\xednios"},{id:"graos",nome:"Gr\xe3os e Cereais"},{id:"bebidas",nome:"Bebidas"},{id:"temperos",nome:"Temperos"},{id:"outros",nome:"Outros"}],i=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{i(!0);let e=await n();if(0===e.length){for(let t of s)try{if(!e.find(e=>e.nome===t.nome)){let r=await fetch("/api/categorias",{method:"POST",headers:(0,o.g)(),body:JSON.stringify({nome:t.nome})});if(r.ok){let t=await r.json();e.push(t)}else 409===r.status&&console.log("Categoria '".concat(t.nome,"' j\xe1 existe, pulando..."))}}catch(e){console.error("Erro ao criar categoria padr\xe3o:",e)}e=await n()}console.log("Categorias loaded:",(null==e?void 0:e.length)||0),t(e)}catch(e){console.error("Erro ao carregar categorias:",e),t([])}finally{i(!1)}})()},[]);let l=async r=>{try{let a=await fetch("/api/categorias",{method:"POST",headers:(0,o.g)(),body:JSON.stringify({nome:r})});if(!a.ok)throw Error("Erro ao criar categoria");let n=await a.json(),s=[...e,n];return t(s),n}catch(e){return console.error("Erro ao adicionar categoria:",e),null}},c=async(r,a)=>{try{let n=await fetch("/api/categorias/".concat(r),{method:"PUT",headers:(0,o.g)(),body:JSON.stringify({nome:a})});if(!n.ok)throw Error("Erro ao atualizar categoria");let s=await n.json(),i=e.map(e=>e.id===r?s:e);return t(i),s}catch(e){return console.error("Erro ao atualizar categoria:",e),null}},d=async r=>{try{if(!(await fetch("/api/categorias/".concat(r),{method:"DELETE",headers:(0,o.g)()})).ok)throw Error("Erro ao deletar categoria");let a=e.filter(e=>e.id!==r);return t(a),!0}catch(e){return console.error("Erro ao remover categoria:",e),!1}};return{categorias:e,isLoading:r,adicionarCategoria:l,atualizarCategoria:c,removerCategoria:d,obterCategoriaPorId:t=>e.find(e=>e.id===t)}},l=async e=>{if(!e)return"N\xe3o informado";let t=(await n()).find(t=>t.id===e);return t?t.nome:e}},22169:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(75504),o=r(51367);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,a.W)(t))}}},function(e){e.O(0,[869,2971,8069,1744],function(){return e(e.s=69014)}),_N_E=e.O()}]);