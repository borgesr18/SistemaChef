(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4167],{93550:function(e,t,a){Promise.resolve().then(a.bind(a,69727))},69727:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(3827),o=a(64090),s=a(32355);let n=async()=>{try{let e=await fetch("/api/configuracoes/categorias-insumos",{headers:(0,s.g)()});if(!e.ok)throw Error("Erro ao buscar categorias de insumos");return await e.json()}catch(e){return console.error("Erro ao buscar categorias de insumos:",e),[]}},i=async e=>{try{let t=await fetch("/api/configuracoes/categorias-insumos",{method:"POST",headers:{...(0,s.g)(),"Content-Type":"application/json"},body:JSON.stringify({nome:e})});if(!t.ok)throw Error("Erro ao adicionar categoria de insumo");return await t.json()}catch(e){return console.error("Erro ao adicionar categoria de insumo:",e),null}},c=async(e,t)=>{try{let a=await fetch("/api/configuracoes/categorias-insumos/".concat(e),{method:"PUT",headers:{...(0,s.g)(),"Content-Type":"application/json"},body:JSON.stringify({nome:t})});if(!a.ok)throw Error("Erro ao atualizar categoria de insumo");return await a.json()}catch(e){return console.error("Erro ao atualizar categoria de insumo:",e),null}},l=async e=>{try{if(!(await fetch("/api/configuracoes/categorias-insumos/".concat(e),{method:"DELETE",headers:(0,s.g)()})).ok)throw Error("Erro ao excluir categoria de insumo");return!0}catch(e){return console.error("Erro ao excluir categoria de insumo:",e),!1}};function d(){let[e,t]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[d,u]=(0,o.useState)(null),[h,m]=(0,o.useState)(""),[p,x]=(0,o.useState)(null),f=async()=>{try{let e=await n();t(e)}catch(e){x(e.message)}};(0,o.useEffect)(()=>{f()},[]);let g=async()=>{a.trim()&&(await i(a),s(""),f())},y=async()=>{null!==d&&h.trim()&&(await c(d,h),u(null),m(""),f())},b=async e=>{confirm("Tem certeza que deseja excluir esta categoria?")&&(await l(e),f())};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Categorias de Insumos"}),p&&(0,r.jsxs)("p",{className:"text-red-600 mb-4",children:["Erro: ",p]}),(0,r.jsxs)("div",{className:"flex items-center mb-6 space-x-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Nova categoria",value:a,onChange:e=>s(e.target.value),className:"border px-3 py-2 rounded"}),(0,r.jsx)("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Adicionar"})]}),(0,r.jsxs)("table",{className:"w-full table-auto border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2 text-left",children:"ID"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"Nome"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"A\xe7\xf5es"})]})}),(0,r.jsxs)("tbody",{children:[e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border p-2",children:e.id}),(0,r.jsx)("td",{className:"border p-2",children:d===e.id?(0,r.jsx)("input",{value:h,onChange:e=>m(e.target.value),className:"border px-2 py-1 w-full"}):e.nome}),(0,r.jsxs)("td",{className:"border p-2 space-x-2",children:[d===e.id?(0,r.jsx)("button",{onClick:y,className:"text-blue-600 hover:underline",children:"Salvar"}):(0,r.jsx)("button",{onClick:()=>{u(e.id),m(e.nome)},className:"text-blue-600 hover:underline",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:underline",children:"Excluir"})]})]},e.id)),0===e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-4 text-gray-500",children:"Nenhuma categoria cadastrada."})})]})]})]})}},32355:function(e,t,a){"use strict";a.d(t,{g:function(){return r},x:function(){return o}});let r=()=>{var e,t;let a=null===(t=document.cookie)||void 0===t?void 0:null===(e=t.split("; ").find(e=>e.startsWith("sb-access-token=")))||void 0===e?void 0:e.split("=")[1];return{Authorization:a?"Bearer ".concat(a):""}},o={get:async e=>await fetch(e,{method:"GET",headers:{...r(),"Content-Type":"application/json"}}),post:async(e,t)=>await fetch(e,{method:"POST",headers:{...r(),"Content-Type":"application/json"},body:JSON.stringify(t)}),put:async(e,t)=>await fetch(e,{method:"PUT",headers:{...r(),"Content-Type":"application/json"},body:JSON.stringify(t)}),delete:async e=>await fetch(e,{method:"DELETE",headers:{...r(),"Content-Type":"application/json"}})}}},function(e){e.O(0,[2971,8069,1744],function(){return e(e.s=93550)}),_N_E=e.O()}]);