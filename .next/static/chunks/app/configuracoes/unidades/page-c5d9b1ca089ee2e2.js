(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9216],{58958:function(e,t,r){Promise.resolve().then(r.bind(r,15238))},15238:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(3827),n=r(64090),o=r(20200),i=r(66651),s=r(70492),l=r(32278),d=r(18061);function c(){let{unidades:e,adicionarUnidade:t,atualizarUnidade:r,removerUnidade:c}=(0,d.x)(),{isOpen:u,openModal:f,closeModal:m}=(0,s.d)(),{isOpen:h,openModal:x,closeModal:p}=(0,s.d)(),[y,v]=(0,n.useState)({id:"",nome:""}),[g,b]=(0,n.useState)({id:"",nome:""}),[j,w]=(0,n.useState)(""),N=(0,n.useRef)(null),C=(e,t)=>{b({id:e,nome:t}),x()},k=e.filter(e=>e.id.toLowerCase().includes(j.toLowerCase())||e.nome.toLowerCase().includes(j.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Unidades de Medida"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(i.default,{onClick:f,variant:"primary",children:"➕ Nova Unidade"}),(0,a.jsx)(i.default,{onClick:()=>{let t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download="unidades.json",n.click(),URL.revokeObjectURL(a)},variant:"secondary",children:"⬇️ Exportar"}),(0,a.jsx)(i.default,{onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},variant:"secondary",children:"⬆️ Importar"})]}),(0,a.jsx)("div",{className:"w-full sm:w-[220px]",children:(0,a.jsx)(l.default,{label:"",placeholder:"Buscar...",value:j,onChange:e=>w(e.target.value),className:"h-[38px]"})})]}),(0,a.jsx)("input",{type:"file",ref:N,className:"hidden",accept:"application/json",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!a)return;let n=new FileReader;n.onload=()=>{try{JSON.parse(n.result).forEach(e=>e.id&&t(e.id,e.nome))}catch(e){console.error("Erro ao importar unidades",e)}},n.readAsText(a)}}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(o.ZP,{headers:["Sigla","Nome","A\xe7\xf5es"],children:k.map(e=>(0,a.jsxs)(o.SC,{children:[(0,a.jsx)(o.pj,{children:e.id}),(0,a.jsx)(o.pj,{children:e.nome}),(0,a.jsxs)(o.pj,{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.default,{size:"sm",variant:"secondary",onClick:()=>C(e.id,e.nome),children:"✏️ Editar"}),(0,a.jsx)(i.default,{size:"sm",variant:"danger",onClick:()=>c(e.id),children:"\uD83D\uDDD1️ Excluir"})]})]},e.id))})}),(0,a.jsx)(s.Z,{isOpen:u,onClose:m,title:"Nova Unidade",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(y.id.trim(),y.nome.trim()),v({id:"",nome:""}),m()},className:"space-y-4",children:[(0,a.jsx)(l.default,{label:"Sigla",value:y.id,onChange:e=>v({...y,id:e.target.value}),required:!0,className:"h-[38px]"}),(0,a.jsx)(l.default,{label:"Nome",value:y.nome,onChange:e=>v({...y,nome:e.target.value}),required:!0,className:"h-[38px]"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(i.default,{type:"button",variant:"secondary",onClick:m,children:"Cancelar"}),(0,a.jsx)(i.default,{type:"submit",variant:"primary",children:"Salvar"})]})]})}),(0,a.jsx)(s.Z,{isOpen:h,onClose:p,title:"Editar Unidade",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(g.id,g.nome.trim()),p()},className:"space-y-4",children:[(0,a.jsx)(l.default,{label:"Sigla",value:g.id,disabled:!0,className:"h-[38px]"}),(0,a.jsx)(l.default,{label:"Nome",value:g.nome,onChange:e=>b({...g,nome:e.target.value}),required:!0,className:"h-[38px]"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(i.default,{type:"button",variant:"secondary",onClick:p,children:"Cancelar"}),(0,a.jsx)(i.default,{type:"submit",variant:"primary",children:"Salvar"})]})]})})]})}},66651:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(3827),n=r(64090),o=r(76371),i=r(49769),s=r(22169);let l=(0,i.j)("inline-flex items-center justify-center rounded-2xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:d=!1,...c}=e,u=d?o.g7:"button";return(0,a.jsx)(u,{className:(0,s.cn)(l({variant:n,size:i,className:r})),ref:t,...c})});d.displayName="Button"},32278:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(3827),n=r(64090),o=r(22169);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},70492:function(e,t,r){"use strict";r.d(t,{d:function(){return o}});var a=r(3827),n=r(64090);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,r]=(0,n.useState)(e);return{isOpen:t,openModal:()=>r(!0),closeModal:()=>r(!1),toggleModal:()=>r(!t)}};t.Z=e=>{let{isOpen:t,onClose:r,title:o,children:i,footer:s,size:l="md"}=e,[d,c]=(0,n.useState)(!1);return((0,n.useEffect)(()=>(t?(c(!0),document.body.style.overflow="hidden"):(setTimeout(()=>{c(!1)},200),document.body.style.overflow="auto"),()=>{document.body.style.overflow="auto"}),[t]),d||t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 ".concat(t?"opacity-100":"opacity-0"," transition-opacity duration-200"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]," z-10 ").concat(t?"translate-y-0":"translate-y-4"," transition-transform duration-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:o}),(0,a.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:r,children:[(0,a.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:i}),s&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",style:{borderColor:"var(--cor-borda)"},children:s})]})]}):null}},20200:function(e,t,r){"use strict";r.d(t,{SC:function(){return o},pj:function(){return i}});var a=r(3827),n=r(64090);let o=e=>{let{children:t,className:r="",...n}=e;return(0,a.jsx)("tr",{className:"odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ".concat(r),...n,children:t})},i=e=>{let{children:t,className:r="",compact:n=!1}=e;return(0,a.jsx)("td",{className:"".concat(n?"px-2 py-2":"px-6 py-4"," text-sm ").concat(r),style:{color:"var(--cor-texto-secundario)"},children:t})};t.ZP=e=>{let{headers:t,children:r,className:o="",emptyMessage:i="Nenhum dado encontrado",isLoading:s=!1}=e;return(0,a.jsx)("div",{className:"w-full overflow-x-hidden rounded-lg border ".concat(o),style:{borderColor:"var(--cor-borda)"},children:(0,a.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsx)("tr",{children:t.map((e,t)=>(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},t))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"ml-2",children:"Carregando..."})]})})}):n.Children.count(r)>0?r:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:i})})})]})})}},32355:function(e,t,r){"use strict";r.d(t,{g:function(){return a},x:function(){return n}});let a=()=>{var e,t;let r=null===(t=document.cookie)||void 0===t?void 0:null===(e=t.split("; ").find(e=>e.startsWith("sb-access-token=")))||void 0===e?void 0:e.split("=")[1];return{Authorization:r?"Bearer ".concat(r):""}},n={get:async e=>await fetch(e,{method:"GET",headers:{...a(),"Content-Type":"application/json"}}),post:async(e,t)=>await fetch(e,{method:"POST",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(t)}),put:async(e,t)=>await fetch(e,{method:"PUT",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(t)}),delete:async e=>await fetch(e,{method:"DELETE",headers:{...a(),"Content-Type":"application/json"}})}},18061:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var a=r(64090),n=r(32355);let o=async()=>{try{let e=await fetch("/api/unidades",{headers:(0,n.g)()});if(!e.ok)return i;let t=await e.json(),r=[...i];return t.forEach(e=>{r.find(t=>t.id===e.id)||r.push(e)}),r}catch(e){return console.error("Erro ao buscar unidades da API:",e),i}},i=[{id:"g",nome:"Gramas (g)"},{id:"kg",nome:"Quilogramas (kg)"},{id:"ml",nome:"Mililitros (ml)"},{id:"l",nome:"Litros (l)"},{id:"un",nome:"Unidade"},{id:"cx",nome:"Caixa"},{id:"pct",nome:"Pacote"}],s=()=>{let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{s(!0);let e=await o();console.log("Unidades loaded:",(null==e?void 0:e.length)||0),t(e)}catch(e){console.error("Erro ao carregar unidades de medida:",e),t([])}finally{s(!1)}})()},[]);let l=async(r,a)=>{try{if(i.find(e=>e.id===r))throw Error("J\xe1 existe uma unidade padr\xe3o com esta sigla");let o=await fetch("/api/unidades",{method:"POST",headers:(0,n.g)(),body:JSON.stringify({id:r,nome:a})});if(!o.ok)throw Error("Erro ao criar unidade");let s=await o.json(),l=[...e,s];return t(l),s}catch(e){return console.error("Erro ao adicionar unidade:",e),null}},d=async(r,a)=>{try{if(i.find(e=>e.id===r))throw Error("N\xe3o \xe9 poss\xedvel editar unidades padr\xe3o do sistema");let o=await fetch("/api/unidades/".concat(r),{method:"PUT",headers:(0,n.g)(),body:JSON.stringify({nome:a})});if(!o.ok)throw Error("Erro ao atualizar unidade");let s=await o.json(),l=e.map(e=>e.id===r?s:e);return t(l),s}catch(e){return console.error("Erro ao atualizar unidade:",e),null}},c=async r=>{try{if(i.find(e=>e.id===r))throw Error("N\xe3o \xe9 poss\xedvel deletar unidades padr\xe3o do sistema");if(!(await fetch("/api/unidades/".concat(r),{method:"DELETE",headers:(0,n.g)()})).ok)throw Error("Erro ao deletar unidade");let a=e.filter(e=>e.id!==r);return t(a),!0}catch(e){return console.error("Erro ao remover unidade:",e),!1}};return{unidades:e,isLoading:r,adicionarUnidade:l,atualizarUnidade:d,removerUnidade:c,obterUnidadePorId:t=>e.find(e=>e.id===t)}}},22169:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var a=r(75504),n=r(51367);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[869,2971,8069,1744],function(){return e(e.s=58958)}),_N_E=e.O()}]);