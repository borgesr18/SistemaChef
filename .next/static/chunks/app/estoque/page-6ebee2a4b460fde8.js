(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9266],{50225:function(e,r,t){Promise.resolve().then(t.bind(t,47172))},47172:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var a=t(3827),n=t(64090),o=t(57418),l=t(20200),s=t(66651),d=t(32278),i=t(79173),c=t(70492),u=t(93242),m=t(29130),x=t(27742),p=t(16297);function f(){var e;let{movimentacoes:r,isLoading:t,registrarEntrada:f,registrarSaida:h,atualizarMovimentacao:b,removerMovimentacao:v}=(0,m.H)(),{produtos:g}=(0,x.U)(),{fichasTecnicas:j}=(0,p.vG)(),[y,N]=(0,n.useState)({tipo:"entrada",produtoId:"",quantidade:"",preco:"",fornecedor:"",marca:""}),[w,C]=(0,n.useState)({}),[k,S]=(0,n.useState)(null),[q,I]=(0,n.useState)(""),[E,M]=(0,n.useState)(null),{isOpen:D,openModal:P,closeModal:Z}=(0,c.d)();(0,n.useEffect)(()=>{if(!q)return;let e=setTimeout(()=>I(""),3e3);return()=>clearTimeout(e)},[q]);let z=e=>{let{name:r,value:t}=e.target;N(e=>({...e,[r]:t}))},F=()=>{let e={};return y.produtoId||(e.produtoId="Produto \xe9 obrigat\xf3rio"),(!y.quantidade||isNaN(Number(y.quantidade)))&&(e.quantidade="Qtd inv\xe1lida"),"entrada"!==y.tipo||((!y.preco||isNaN(Number(y.preco.replace(",","."))))&&(e.preco="Pre\xe7o inv\xe1lido"),y.fornecedor||(e.fornecedor="Fornecedor obrigat\xf3rio")),C(e),0===Object.keys(e).length},T=e=>{var r;S({id:e.id,quantidade:String(Math.abs(e.quantidade)),preco:(null===(r=e.preco)||void 0===r?void 0:r.toString())||"",fornecedor:e.fornecedor||"",marca:e.marca||""}),P()},_=e=>new Date(e).toLocaleDateString(),L=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u.Z,{message:q,onClose:()=>I("")}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Estoque de Insumos"}),(0,a.jsx)(o.Z,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),F()&&("entrada"===y.tipo?(f({produtoId:y.produtoId,quantidade:Number(y.quantidade),preco:Number(y.preco.replace(",",".")),fornecedor:y.fornecedor,marca:y.marca}),I("Entrada registrada")):(h({produtoId:y.produtoId,quantidade:Number(y.quantidade)}),I("Sa\xedda registrada")),N({tipo:"entrada",produtoId:"",quantidade:"",preco:"",fornecedor:"",marca:""}))},className:"flex flex-wrap items-end gap-4",children:[(0,a.jsx)(i.Z,{label:"Produto *",name:"produtoId",value:y.produtoId,onChange:z,options:g.map(e=>({value:e.id,label:e.nome})).sort((e,r)=>e.label.localeCompare(r.label)),error:w.produtoId,className:"flex-1 min-w-[150px]"}),(0,a.jsx)(i.Z,{label:"Tipo *",name:"tipo",value:y.tipo,onChange:z,options:[{value:"entrada",label:"Entrada"},{value:"saida",label:"Sa\xedda"}],className:"w-32"}),(0,a.jsx)(d.default,{label:"Quantidade *",name:"quantidade",value:y.quantidade,onChange:z,error:w.quantidade,className:"w-28"}),"entrada"===y.tipo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{label:"Pre\xe7o Unit\xe1rio *",name:"preco",value:y.preco,onChange:z,error:w.preco,className:"w-32"}),(0,a.jsx)(d.default,{label:"Fornecedor *",name:"fornecedor",value:y.fornecedor,onChange:z,error:w.fornecedor,className:"flex-1 min-w-[150px]"}),(0,a.jsx)(d.default,{label:"Marca",name:"marca",value:y.marca,onChange:z,className:"flex-1 min-w-[120px]"})]}),(0,a.jsx)("div",{className:"flex justify-end flex-1",children:(0,a.jsxs)(s.default,{type:"submit",variant:"primary",children:["Registrar ","entrada"===y.tipo?"Entrada":"Sa\xedda"]})})]})}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(l.ZP,{headers:["Data","Produto","Qtd","Pre\xe7o","Fornecedor","Marca","Tipo","A\xe7\xf5es"],isLoading:t,emptyMessage:"Nenhuma movimenta\xe7\xe3o registrada",children:r.map(e=>{let r=g.find(r=>r.id===e.produtoId),t=j.find(r=>r.id===e.produtoId);return(0,a.jsxs)(l.SC,{children:[(0,a.jsx)(l.pj,{children:_(e.data)}),(0,a.jsx)(l.pj,{children:(null==r?void 0:r.nome)||(null==t?void 0:t.nome)||"Produto removido"}),(0,a.jsx)(l.pj,{children:e.quantidade}),(0,a.jsx)(l.pj,{children:e.preco?L(e.preco):"-"}),(0,a.jsx)(l.pj,{children:e.fornecedor||"-"}),(0,a.jsx)(l.pj,{children:e.marca||"-"}),(0,a.jsx)(l.pj,{children:"entrada"===e.tipo?"\uD83D\uDCE5 Entrada":"\uD83D\uDCE4 Sa\xedda"}),(0,a.jsxs)(l.pj,{className:"relative text-right",children:[(0,a.jsx)("button",{className:"p-1 rounded hover:bg-gray-100",onClick:()=>M(E===e.id?null:e.id),children:(0,a.jsx)("span",{className:"material-icons text-gray-600",children:"more_vert"})}),E===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-10",children:[(0,a.jsxs)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center",onClick:()=>{M(null),T(e)},children:[(0,a.jsx)("span",{className:"material-icons mr-1 text-black text-sm",children:"edit"}),"Editar"]}),(0,a.jsxs)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center text-red-600",onClick:()=>{M(null),v(e.id)},children:[(0,a.jsx)("span",{className:"material-icons mr-1 text-black text-sm",children:"delete"}),"Excluir"]})]})]})]},e.id)})})}),(0,a.jsx)(c.Z,{isOpen:D,onClose:Z,title:"Editar Movimenta\xe7\xe3o",children:k&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k&&(b(k.id,{quantidade:Number(k.quantidade),preco:k.preco?Number(k.preco.replace(",",".")):void 0,fornecedor:k.fornecedor,marca:k.marca}),Z())},className:"space-y-4",children:[(0,a.jsx)(d.default,{label:"Quantidade",value:k.quantidade,onChange:e=>S({...k,quantidade:e.target.value}),required:!0}),(null===(e=r.find(e=>e.id===k.id))||void 0===e?void 0:e.tipo)==="entrada"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{label:"Pre\xe7o Unit\xe1rio",value:k.preco,onChange:e=>S({...k,preco:e.target.value})}),(0,a.jsx)(d.default,{label:"Fornecedor",value:k.fornecedor,onChange:e=>S({...k,fornecedor:e.target.value})}),(0,a.jsx)(d.default,{label:"Marca",value:k.marca,onChange:e=>S({...k,marca:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(s.default,{type:"button",variant:"secondary",onClick:Z,children:"Cancelar"}),(0,a.jsx)(s.default,{type:"submit",variant:"primary",children:"Salvar"})]})]})})]})}},66651:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var a=t(3827),n=t(64090),o=t(76371),l=t(49769),s=t(22169);let d=(0,l.j)("inline-flex items-center justify-center rounded-2xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=n.forwardRef((e,r)=>{let{className:t,variant:n,size:l,asChild:i=!1,...c}=e,u=i?o.g7:"button";return(0,a.jsx)(u,{className:(0,s.cn)(d({variant:n,size:l,className:t})),ref:r,...c})});i.displayName="Button"},32278:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var a=t(3827),n=t(64090),o=t(22169);let l=n.forwardRef((e,r)=>{let{className:t,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},70492:function(e,r,t){"use strict";t.d(r,{d:function(){return o}});var a=t(3827),n=t(64090);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[r,t]=(0,n.useState)(e);return{isOpen:r,openModal:()=>t(!0),closeModal:()=>t(!1),toggleModal:()=>t(!r)}};r.Z=e=>{let{isOpen:r,onClose:t,title:o,children:l,footer:s,size:d="md"}=e,[i,c]=(0,n.useState)(!1);return((0,n.useEffect)(()=>(r?(c(!0),document.body.style.overflow="hidden"):(setTimeout(()=>{c(!1)},200),document.body.style.overflow="auto"),()=>{document.body.style.overflow="auto"}),[r]),i||r)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 ".concat(r?"opacity-100":"opacity-0"," transition-opacity duration-200"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," z-10 ").concat(r?"translate-y-0":"translate-y-4"," transition-transform duration-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:o}),(0,a.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:t,children:[(0,a.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:l}),s&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",style:{borderColor:"var(--cor-borda)"},children:s})]})]}):null}},79173:function(e,r,t){"use strict";var a=t(3827);let n=(0,t(64090).forwardRef)((e,r)=>{let{label:t,error:n,helperText:o,options:l,className:s="",...d}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,a.jsxs)("select",{ref:r,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 \n            ".concat(n?"border-red-500":"border-gray-300"," \n            ").concat(s),...d,children:[(0,a.jsx)("option",{value:"",children:"Selecione..."}),l.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),o&&!n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o})]})});n.displayName="Select",r.Z=n},20200:function(e,r,t){"use strict";t.d(r,{SC:function(){return o},pj:function(){return l}});var a=t(3827),n=t(64090);let o=e=>{let{children:r,className:t="",...n}=e;return(0,a.jsx)("tr",{className:"odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ".concat(t),...n,children:r})},l=e=>{let{children:r,className:t="",compact:n=!1}=e;return(0,a.jsx)("td",{className:"".concat(n?"px-2 py-2":"px-6 py-4"," text-sm ").concat(t),style:{color:"var(--cor-texto-secundario)"},children:r})};r.ZP=e=>{let{headers:r,children:t,className:o="",emptyMessage:l="Nenhum dado encontrado",isLoading:s=!1}=e;return(0,a.jsx)("div",{className:"w-full overflow-x-hidden rounded-lg border ".concat(o),style:{borderColor:"var(--cor-borda)"},children:(0,a.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsx)("tr",{children:r.map((e,r)=>(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},r))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"ml-2",children:"Carregando..."})]})})}):n.Children.count(t)>0?t:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:l})})})]})})}},93242:function(e,r,t){"use strict";var a=t(3827),n=t(64090);r.Z=e=>{let{message:r,onClose:t}=e;return((0,n.useEffect)(()=>{if(!r)return;let e=setTimeout(t,3e3);return()=>clearTimeout(e)},[r,t]),r)?(0,a.jsx)("div",{className:"fixed top-4 right-4 bg-[var(--cor-sucesso)] text-white px-4 py-2 rounded shadow",children:r}):null}},22169:function(e,r,t){"use strict";t.d(r,{cn:function(){return o}});var a=t(75504),n=t(51367);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}}},function(e){e.O(0,[7176,869,3837,30,2971,8069,1744],function(){return e(e.s=50225)}),_N_E=e.O()}]);