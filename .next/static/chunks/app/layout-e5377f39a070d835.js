(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{19228:function(e,s,r){Promise.resolve().then(r.t.bind(r,63385,23)),Promise.resolve().then(r.bind(r,50191)),Promise.resolve().then(r.bind(r,83779))},50191:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var t=r(3827),a=r(64090),n=r(8792),l=r(14570),o=r(40796),i=()=>{var e,s;let[r,i]=(0,a.useState)(!1),c=(0,a.useRef)(null),{usuarioAtual:u,logout:d,isLoading:h}=(0,l.useUsuarios)(),m=()=>i(!1);return h?null:(0,t.jsx)("header",{className:"border-b shadow-sm",style:{backgroundColor:"var(--cor-primaria)",color:"white",borderColor:"var(--cor-borda)"},children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.Z,{className:"text-xl"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"- Sistema de Fichas T\xe9cnicas"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"relative",onMouseEnter:()=>{c.current&&clearTimeout(c.current),i(!0)},onMouseLeave:()=>{c.current=setTimeout(()=>i(!1),200)},children:[(0,t.jsxs)("button",{onClick:()=>{i(!r)},className:"flex items-center space-x-2 focus:outline-none",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-white text-gray-800 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:(null==u?void 0:null===(s=u.nome)||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.toUpperCase())||"U"})}),(0,t.jsx)("span",{className:"hidden md:block text-sm font-medium text-white",children:(null==u?void 0:u.nome)||"Usu\xe1rio"})]}),r&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[(0,t.jsx)(n.default,{href:"/configuracoes/perfil",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Perfil"}),(0,t.jsx)(n.default,{href:"/configuracoes",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Configura\xe7\xf5es"}),(0,t.jsx)("div",{className:"border-t",style:{borderColor:"var(--cor-borda)"}}),(0,t.jsx)("button",{onClick:()=>{d(),m()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sair"})]})]})})]})})},c=()=>{let[e,s]=(0,a.useState)(!1);return(0,t.jsxs)("aside",{className:"text-white transition-all duration-300 ".concat(e?"w-16":"w-64"," min-h-screen flex flex-col"),style:{backgroundColor:"var(--cor-primaria)"},children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[!e&&(0,t.jsx)(o.Z,{className:"text-xl",showTagline:!1}),(0,t.jsx)("button",{onClick:()=>s(e=>!e),className:"p-2 rounded-full hover:bg-[var(--cor-secundaria)] focus:outline-none","aria-label":"Alternar menu lateral","aria-expanded":!e,children:(0,t.jsx)("span",{className:"material-icons",children:e?"chevron_right":"chevron_left"})})]}),(0,t.jsx)("nav",{className:"mt-4 flex-1",children:(0,t.jsx)("ul",{children:[{href:"/",icon:"dashboard",label:"Dashboard"},{href:"/fichas-tecnicas",icon:"receipt",label:"Fichas T\xe9cnicas"},{href:"/produtos",icon:"inventory",label:"Insumos"},{href:"/estoque",icon:"store",label:"Estoque de Insumos"},{href:"/producao",icon:"factory",label:"Produ\xe7\xe3o"},{href:"/estoque-producao",icon:"warehouse",label:"Estoque de Produ\xe7\xe3o"},{href:"/precos",icon:"attach_money",label:"Pre\xe7os de Venda"},{href:"/relatorios",icon:"bar_chart",label:"Relat\xf3rios"},{href:"/configuracoes",icon:"settings",label:"Configura\xe7\xf5es"}].map(s=>{let{href:r,icon:a,label:l}=s;return(0,t.jsx)("li",{children:(0,t.jsxs)(n.default,{href:r,className:"flex items-center px-4 py-3 hover:bg-[var(--cor-secundaria)] transition-colors",children:[(0,t.jsx)("span",{className:"material-icons mr-3",children:a}),!e&&(0,t.jsx)("span",{className:"text-sm",children:l})]})},r)})})})]})},u=r(83779),d=r(47907),h=e=>{let{children:s}=e,{user:r,loading:n}=(0,u.useAuth)(),l=(0,d.useRouter)(),o=(0,d.usePathname)();(0,a.useEffect)(()=>{!n&&(r||"/login"===o||"/usuarios/novo"===o||l.push("/login"),r&&("/login"===o||"/usuarios/novo"===o)&&l.push("/"))},[r,n,o,l]);let h="/login"===o||"/usuarios/novo"===o||o.includes("/imprimir");return(0,t.jsxs)("div",{className:"flex h-screen",style:{backgroundColor:"var(--cor-fundo)"},children:[!h&&(0,t.jsx)(c,{}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[!h&&(0,t.jsx)(i,{}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:s}),!h&&(0,t.jsxs)("footer",{className:"p-4 text-center text-sm border-t",style:{backgroundColor:"white",color:"var(--cor-texto-secundario)",borderColor:"var(--cor-borda)"},children:["CustoChef \xa9 ",new Date().getFullYear()]})]})]})}},40796:function(e,s,r){"use strict";var t=r(3827),a=r(20703);r(64090),s.Z=e=>{let{className:s="",showTagline:r=!1}=e;return(0,t.jsxs)("span",{className:"inline-flex items-center space-x-2 ".concat(s),children:[(0,t.jsx)(a.default,{src:"/logo.svg",alt:"GastroChef",width:24,height:24}),(0,t.jsx)("span",{className:"font-bold",children:"GastroChef"}),r&&(0,t.jsx)("span",{className:"text-xs whitespace-nowrap",children:"Sistema de Fichas T\xe9cnicas"})]})}},83779:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return i},useAuth:function(){return c}});var t=r(3827),a=r(64090),n=r(47907);let l=(0,r(1877).supabaseBrowser)(),o=(0,a.createContext)(void 0),i=e=>{let{children:s}=e,r=(0,n.useRouter)(),[i,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{var e;let{data:s}=await l.auth.getSession();d(s.session),c((null===(e=s.session)||void 0===e?void 0:e.user)||null),m(!1)})();let{data:{subscription:e}}=l.auth.onAuthStateChange((e,s)=>{d(s),c((null==s?void 0:s.user)||null)});return()=>{e.unsubscribe()}},[]);let x=async(e,s)=>{m(!0);let{data:t,error:a}=await l.auth.signInWithPassword({email:e,password:s});if(a)throw m(!1),a;d(t.session),c(t.session.user),m(!1),r.push("/")},f=async()=>{await l.auth.signOut(),c(null),d(null),r.push("/login")};return(0,t.jsx)(o.Provider,{value:{user:i,session:u,loading:h,login:x,signOut:f},children:s})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1877:function(e,s,r){"use strict";(0,r(33837).createBrowserClient)("https://sutmfzcmrlqnocsusiav.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1dG1memNtcmxxbm9jc3VzaWF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1MzgwODMsImV4cCI6MjA2NjExNDA4M30.BQRo64qRNzqB_XGNeSe4jkZ8Mzzji8eUYVbS_nWw8tI")},14570:function(e,s,r){"use strict";(0,r(58714).createClientComponentClient)()},63385:function(){}},function(e){e.O(0,[7176,3837,8714,8792,2202,2971,8069,1744],function(){return e(e.s=19228)}),_N_E=e.O()}]);