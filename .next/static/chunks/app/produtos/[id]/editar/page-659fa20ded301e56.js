(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2163],{9173:function(r,o,e){Promise.resolve().then(e.bind(e,81184))},47907:function(r,o,e){"use strict";var a=e(15313);e.o(a,"useParams")&&e.d(o,{useParams:function(){return a.useParams}}),e.o(a,"usePathname")&&e.d(o,{usePathname:function(){return a.usePathname}}),e.o(a,"useRouter")&&e.d(o,{useRouter:function(){return a.useRouter}})},81184:function(r,o,e){"use strict";e.r(o),e.d(o,{default:function(){return g}});var a=e(3827),i=e(64090),t=e(47907),n=e(57418),s=e(32278),d=e(79173),u=e(66651),l=e(27742),c=e(18061),m=e(53018),f=e(93242);function g(){let r=(0,t.useParams)(),o=(0,t.useRouter)(),{obterProdutoPorId:e,atualizarProduto:g,isLoading:p}=(0,l.U)(),{categorias:b}=(0,m.D)(),{unidades:h}=(0,c.x)(),[N,v]=(0,i.useState)(!1),[y,x]=(0,i.useState)(!1),[E,j]=(0,i.useState)("");(0,i.useEffect)(()=>{if(!E)return;let r=setTimeout(()=>j(""),3e3);return()=>clearTimeout(r)},[E]);let w=r.id,[T,S]=(0,i.useState)({nome:"",categoria:"",marca:"",unidadeMedida:"",preco:"",fornecedor:"",pesoEmbalagem:"",infoNutricional:{calorias:"",carboidratos:"",proteinas:"",gordurasTotais:"",gordurasSaturadas:"",gordurasTrans:"",fibras:"",sodio:""}}),[C,P]=(0,i.useState)({});if((0,i.useEffect)(()=>{var r,a,i,t,n,s,d,u,l,c,m,f,g,b,h,N,v,y;if(p)return;let E=e(w);if(!E){o.push("/produtos");return}S({nome:E.nome,categoria:E.categoria||"",marca:E.marca||"",unidadeMedida:E.unidadeMedida,preco:(null===(r=E.preco)||void 0===r?void 0:r.toString())||"",fornecedor:E.fornecedor,pesoEmbalagem:(null===(a=E.pesoEmbalagem)||void 0===a?void 0:a.toString())||"",infoNutricional:{calorias:(null===(t=E.infoNutricional)||void 0===t?void 0:null===(i=t.calorias)||void 0===i?void 0:i.toString())||"",carboidratos:(null===(s=E.infoNutricional)||void 0===s?void 0:null===(n=s.carboidratos)||void 0===n?void 0:n.toString())||"",proteinas:(null===(u=E.infoNutricional)||void 0===u?void 0:null===(d=u.proteinas)||void 0===d?void 0:d.toString())||"",gordurasTotais:(null===(c=E.infoNutricional)||void 0===c?void 0:null===(l=c.gordurasTotais)||void 0===l?void 0:l.toString())||"",gordurasSaturadas:(null===(f=E.infoNutricional)||void 0===f?void 0:null===(m=f.gordurasSaturadas)||void 0===m?void 0:m.toString())||"",gordurasTrans:(null===(b=E.infoNutricional)||void 0===b?void 0:null===(g=b.gordurasTrans)||void 0===g?void 0:g.toString())||"",fibras:(null===(N=E.infoNutricional)||void 0===N?void 0:null===(h=N.fibras)||void 0===h?void 0:h.toString())||"",sodio:(null===(y=E.infoNutricional)||void 0===y?void 0:null===(v=y.sodio)||void 0===v?void 0:v.toString())||""}}),x(!!E.infoNutricional)},[p,w]),p)return(0,a.jsx)("p",{children:"Carregando..."});let k=r=>{let{name:o,value:e}=r.target;if(o.includes(".")){let[r,a]=o.split(".");S(o=>({...o,[r]:{...o[r],[a]:e}}))}else S(r=>({...r,[o]:e}))},D=()=>{let r={};if(T.nome||(r.nome="Nome \xe9 obrigat\xf3rio"),T.categoria||(r.categoria="Categoria \xe9 obrigat\xf3ria"),T.unidadeMedida||(r.unidadeMedida="Unidade de medida \xe9 obrigat\xf3ria"),T.preco?(isNaN(Number(T.preco))||0>=Number(T.preco))&&(r.preco="Pre\xe7o deve ser um n\xfamero positivo"):r.preco="Pre\xe7o \xe9 obrigat\xf3rio",T.fornecedor||(r.fornecedor="Fornecedor \xe9 obrigat\xf3rio"),(!T.pesoEmbalagem||isNaN(Number(T.pesoEmbalagem))||0>=Number(T.pesoEmbalagem))&&(r.pesoEmbalagem="Informe o peso por embalagem"),y){let o=T.infoNutricional;o.calorias&&isNaN(Number(o.calorias))&&(r["infoNutricional.calorias"]="Deve ser um n\xfamero"),o.carboidratos&&isNaN(Number(o.carboidratos))&&(r["infoNutricional.carboidratos"]="Deve ser um n\xfamero"),o.proteinas&&isNaN(Number(o.proteinas))&&(r["infoNutricional.proteinas"]="Deve ser um n\xfamero"),o.gordurasTotais&&isNaN(Number(o.gordurasTotais))&&(r["infoNutricional.gordurasTotais"]="Deve ser um n\xfamero"),o.gordurasSaturadas&&isNaN(Number(o.gordurasSaturadas))&&(r["infoNutricional.gordurasSaturadas"]="Deve ser um n\xfamero"),o.gordurasTrans&&isNaN(Number(o.gordurasTrans))&&(r["infoNutricional.gordurasTrans"]="Deve ser um n\xfamero"),o.fibras&&isNaN(Number(o.fibras))&&(r["infoNutricional.fibras"]="Deve ser um n\xfamero"),o.sodio&&isNaN(Number(o.sodio))&&(r["infoNutricional.sodio"]="Deve ser um n\xfamero")}return P(r),0===Object.keys(r).length};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(f.Z,{message:E,onClose:()=>j("")}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Editar Insumo"}),(0,a.jsx)("form",{onSubmit:r=>{if(r.preventDefault(),D()){v(!0);try{let r={...T,preco:Number(T.preco),pesoEmbalagem:Number(T.pesoEmbalagem),infoNutricional:y?{calorias:Number(T.infoNutricional.calorias)||0,carboidratos:Number(T.infoNutricional.carboidratos)||0,proteinas:Number(T.infoNutricional.proteinas)||0,gordurasTotais:Number(T.infoNutricional.gordurasTotais)||0,gordurasSaturadas:Number(T.infoNutricional.gordurasSaturadas)||0,gordurasTrans:Number(T.infoNutricional.gordurasTrans)||0,fibras:Number(T.infoNutricional.fibras)||0,sodio:Number(T.infoNutricional.sodio)||0}:void 0};g(w,r),o.push("/produtos/".concat(w))}catch(r){console.error("Erro ao atualizar produto:",r),j("Erro ao atualizar produto")}finally{v(!1)}}},children:(0,a.jsxs)(n.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(s.default,{label:"Nome do Insumo *",name:"nome",value:T.nome,onChange:k,error:C.nome,placeholder:"Ex: Farinha de Trigo"}),(0,a.jsx)(d.Z,{label:"Categoria *",name:"categoria",value:T.categoria,onChange:k,options:b.map(r=>({value:r.id,label:r.nome})).sort((r,o)=>r.label.localeCompare(o.label)),error:C.categoria}),(0,a.jsx)(s.default,{label:"Marca",name:"marca",value:T.marca,onChange:k,placeholder:"Ex: Dona Benta"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(d.Z,{label:"Unidade de Medida *",name:"unidadeMedida",value:T.unidadeMedida,onChange:k,options:h.map(r=>({value:r.id,label:r.nome})).sort((r,o)=>r.label.localeCompare(o.label)),error:C.unidadeMedida}),(0,a.jsx)(s.default,{label:"Pre\xe7o (R$) *",name:"preco",type:"number",step:"0.01",min:"0",value:T.preco,onChange:k,error:C.preco,placeholder:"Ex: 5.99"}),(0,a.jsx)(s.default,{label:"Fornecedor *",name:"fornecedor",value:T.fornecedor,onChange:k,error:C.fornecedor,placeholder:"Ex: Distribuidora Alimentos"}),(0,a.jsx)(s.default,{label:"Peso/Volume por Embalagem (g ou ml) *",name:"pesoEmbalagem",type:"number",min:"0",value:T.pesoEmbalagem,onChange:k,error:C.pesoEmbalagem,placeholder:"Ex: 1000"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"mostrarInfoNutricional",checked:y,onChange:()=>x(!y),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"mostrarInfoNutricional",className:"ml-2 text-sm font-medium text-gray-700",children:"Adicionar informa\xe7\xf5es nutricionais (por 100g/100ml)"})]}),y&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(s.default,{label:"Calorias (kcal)",name:"infoNutricional.calorias",type:"number",min:"0",value:T.infoNutricional.calorias,onChange:k,error:C["infoNutricional.calorias"]}),(0,a.jsx)(s.default,{label:"Carboidratos (g)",name:"infoNutricional.carboidratos",type:"number",min:"0",step:"0.1",value:T.infoNutricional.carboidratos,onChange:k,error:C["infoNutricional.carboidratos"]}),(0,a.jsx)(s.default,{label:"Prote\xednas (g)",name:"infoNutricional.proteinas",type:"number",min:"0",step:"0.1",value:T.infoNutricional.proteinas,onChange:k,error:C["infoNutricional.proteinas"]}),(0,a.jsx)(s.default,{label:"Gorduras Totais (g)",name:"infoNutricional.gordurasTotais",type:"number",min:"0",step:"0.1",value:T.infoNutricional.gordurasTotais,onChange:k,error:C["infoNutricional.gordurasTotais"]}),(0,a.jsx)(s.default,{label:"Gorduras Saturadas (g)",name:"infoNutricional.gordurasSaturadas",type:"number",min:"0",step:"0.1",value:T.infoNutricional.gordurasSaturadas,onChange:k,error:C["infoNutricional.gordurasSaturadas"]}),(0,a.jsx)(s.default,{label:"Gorduras Trans (g)",name:"infoNutricional.gordurasTrans",type:"number",min:"0",step:"0.1",value:T.infoNutricional.gordurasTrans,onChange:k,error:C["infoNutricional.gordurasTrans"]}),(0,a.jsx)(s.default,{label:"Fibras (g)",name:"infoNutricional.fibras",type:"number",min:"0",step:"0.1",value:T.infoNutricional.fibras,onChange:k,error:C["infoNutricional.fibras"]}),(0,a.jsx)(s.default,{label:"S\xf3dio (mg)",name:"infoNutricional.sodio",type:"number",min:"0",step:"0.1",value:T.infoNutricional.sodio,onChange:k,error:C["infoNutricional.sodio"]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)(u.default,{type:"button",variant:"outline",onClick:()=>o.push("/produtos/".concat(w)),children:"Cancelar"}),(0,a.jsx)(u.default,{type:"submit",variant:"primary",isLoading:N,children:"Atualizar Insumo"})]})]})})]})}},66651:function(r,o,e){"use strict";e.d(o,{z:function(){return u}});var a=e(3827),i=e(64090),t=e(76371),n=e(49769),s=e(22169);let d=(0,n.j)("inline-flex items-center justify-center rounded-2xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((r,o)=>{let{className:e,variant:i,size:n,asChild:u=!1,...l}=r,c=u?t.g7:"button";return(0,a.jsx)(c,{className:(0,s.cn)(d({variant:i,size:n,className:e})),ref:o,...l})});u.displayName="Button"},57418:function(r,o,e){"use strict";var a=e(3827);e(64090),o.Z=r=>{let{children:o,title:e,className:i="",footer:t}=r;return(0,a.jsxs)("div",{className:"card overflow-hidden ".concat(i),children:[e&&(0,a.jsx)("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:(0,a.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:e})}),(0,a.jsx)("div",{className:"p-6",children:o}),t&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t",style:{borderColor:"var(--cor-borda)"},children:t})]})}},32278:function(r,o,e){"use strict";e.d(o,{I:function(){return n}});var a=e(3827),i=e(64090),t=e(22169);let n=i.forwardRef((r,o)=>{let{className:e,type:i,...n}=r;return(0,a.jsx)("input",{type:i,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...n})});n.displayName="Input"},79173:function(r,o,e){"use strict";var a=e(3827);let i=(0,e(64090).forwardRef)((r,o)=>{let{label:e,error:i,helperText:t,options:n,className:s="",...d}=r;return(0,a.jsxs)("div",{className:"mb-4",children:[e&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,a.jsxs)("select",{ref:o,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 \n            ".concat(i?"border-red-500":"border-gray-300"," \n            ").concat(s),...d,children:[(0,a.jsx)("option",{value:"",children:"Selecione..."}),n.map(r=>(0,a.jsx)("option",{value:r.value,children:r.label},r.value))]}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i}),t&&!i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t})]})});i.displayName="Select",o.Z=i},93242:function(r,o,e){"use strict";var a=e(3827),i=e(64090);o.Z=r=>{let{message:o,onClose:e}=r;return((0,i.useEffect)(()=>{if(!o)return;let r=setTimeout(e,3e3);return()=>clearTimeout(r)},[o,e]),o)?(0,a.jsx)("div",{className:"fixed top-4 right-4 bg-[var(--cor-sucesso)] text-white px-4 py-2 rounded shadow",children:o}):null}},32355:function(r,o,e){"use strict";e.d(o,{g:function(){return a},x:function(){return i}});let a=()=>{var r,o;let e=null===(o=document.cookie)||void 0===o?void 0:null===(r=o.split("; ").find(r=>r.startsWith("sb-access-token=")))||void 0===r?void 0:r.split("=")[1];return{Authorization:e?"Bearer ".concat(e):""}},i={get:async r=>await fetch(r,{method:"GET",headers:{...a(),"Content-Type":"application/json"}}),post:async(r,o)=>await fetch(r,{method:"POST",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(o)}),put:async(r,o)=>await fetch(r,{method:"PUT",headers:{...a(),"Content-Type":"application/json"},body:JSON.stringify(o)}),delete:async r=>await fetch(r,{method:"DELETE",headers:{...a(),"Content-Type":"application/json"}})}},53018:function(r,o,e){"use strict";e.d(o,{D:function(){return s},u:function(){return d}});var a=e(64090),i=e(32355);let t=async()=>{try{console.log("\uD83D\uDD0D Buscando categorias de produtos...");let r=await fetch("/api/categorias",{headers:(0,i.g)()});if(console.log("\uD83D\uDCE1 Response status: ".concat(r.status)),!r.ok){let o=await r.text();throw console.error("❌ Erro na API categorias: ".concat(r.status," - ").concat(o)),Error("Erro ao buscar categorias: ".concat(r.status))}let o=await r.json();return console.log("✅ Categorias carregadas: ".concat(o.length)),o}catch(r){return console.error("❌ Erro ao buscar categorias da API:",r),[]}},n=[{id:"hortifruti",nome:"Hortifruti"},{id:"carnes",nome:"Carnes"},{id:"laticinios",nome:"Latic\xednios"},{id:"graos",nome:"Gr\xe3os e Cereais"},{id:"bebidas",nome:"Bebidas"},{id:"temperos",nome:"Temperos"},{id:"outros",nome:"Outros"}],s=()=>{let[r,o]=(0,a.useState)([]),[e,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{s(!0);let r=await t();if(0===r.length){for(let o of n)try{if(!r.find(r=>r.nome===o.nome)){let e=await fetch("/api/categorias",{method:"POST",headers:(0,i.g)(),body:JSON.stringify({nome:o.nome})});if(e.ok){let o=await e.json();r.push(o)}else 409===e.status&&console.log("Categoria '".concat(o.nome,"' j\xe1 existe, pulando..."))}}catch(r){console.error("Erro ao criar categoria padr\xe3o:",r)}r=await t()}console.log("Categorias loaded:",(null==r?void 0:r.length)||0),o(r)}catch(r){console.error("Erro ao carregar categorias:",r),o([])}finally{s(!1)}})()},[]);let d=async e=>{try{let a=await fetch("/api/categorias",{method:"POST",headers:(0,i.g)(),body:JSON.stringify({nome:e})});if(!a.ok)throw Error("Erro ao criar categoria");let t=await a.json(),n=[...r,t];return o(n),t}catch(r){return console.error("Erro ao adicionar categoria:",r),null}},u=async(e,a)=>{try{let t=await fetch("/api/categorias/".concat(e),{method:"PUT",headers:(0,i.g)(),body:JSON.stringify({nome:a})});if(!t.ok)throw Error("Erro ao atualizar categoria");let n=await t.json(),s=r.map(r=>r.id===e?n:r);return o(s),n}catch(r){return console.error("Erro ao atualizar categoria:",r),null}},l=async e=>{try{if(!(await fetch("/api/categorias/".concat(e),{method:"DELETE",headers:(0,i.g)()})).ok)throw Error("Erro ao deletar categoria");let a=r.filter(r=>r.id!==e);return o(a),!0}catch(r){return console.error("Erro ao remover categoria:",r),!1}};return{categorias:r,isLoading:e,adicionarCategoria:d,atualizarCategoria:u,removerCategoria:l,obterCategoriaPorId:o=>r.find(r=>r.id===o)}},d=async r=>{if(!r)return"N\xe3o informado";let o=(await t()).find(o=>o.id===r);return o?o.nome:r}},27742:function(r,o,e){"use strict";e.d(o,{U:function(){return n},k:function(){return t}});var a=e(64090),i=e(32355);let t=async()=>{try{let r=await fetch("/api/produtos",{headers:(0,i.g)()});if(!r.ok)throw Error("Erro ao buscar produtos");return(await r.json()).map(r=>{var o,e;return{id:r.id,nome:r.nome,categoriaId:r.categoria,categoriaNome:null===(o=r.categoriaRef)||void 0===o?void 0:o.nome,marca:r.marca,unidadeId:r.unidadeMedida,unidadeNome:null===(e=r.unidadeRef)||void 0===e?void 0:e.nome,preco:Number(r.preco)||0,precoUnitario:r.precoUnitario?Number(r.precoUnitario):void 0,fornecedor:r.fornecedor,pesoEmbalagem:r.pesoEmbalagem?Number(r.pesoEmbalagem):void 0,imagem:r.imagem,ultimaMovimentacao:r.ultimaMovimentacao,infoNutricional:r.infoNutricional?{calorias:Number(r.infoNutricional.calorias),carboidratos:Number(r.infoNutricional.carboidratos),proteinas:Number(r.infoNutricional.proteinas),gordurasTotais:Number(r.infoNutricional.gordurasTotais),gordurasSaturadas:Number(r.infoNutricional.gordurasSaturadas),gordurasTrans:Number(r.infoNutricional.gordurasTrans),fibras:Number(r.infoNutricional.fibras),sodio:Number(r.infoNutricional.sodio)}:void 0}})}catch(r){return console.error("Erro ao buscar produtos da API:",r),[]}},n=()=>{let[r,o]=(0,a.useState)([]),[e,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{n(!0),o(await t()),n(!1)})()},[]),{produtos:r,isLoading:e,adicionarProduto:async r=>{try{let e={...r,precoUnitario:r.pesoEmbalagem?r.preco/r.pesoEmbalagem:void 0},a=await fetch("/api/produtos",{method:"POST",headers:{...(0,i.g)(),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Erro ao adicionar produto");let t=await a.json();return o(r=>[...r,t]),t}catch(r){return console.error("Erro ao adicionar produto:",r),null}},atualizarProduto:async(r,e)=>{try{let a={...e,precoUnitario:e.pesoEmbalagem?e.preco/e.pesoEmbalagem:void 0},t=await fetch("/api/produtos/".concat(r),{method:"PUT",headers:{...(0,i.g)(),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw Error("Erro ao atualizar produto");let n=await t.json();return o(o=>o.map(o=>o.id===r?n:o)),n}catch(r){return console.error("Erro ao atualizar produto:",r),null}},removerProduto:async r=>{try{if(!(await fetch("/api/produtos/".concat(r),{method:"DELETE",headers:(0,i.g)()})).ok)throw Error("Erro ao remover produto");return o(o=>o.filter(o=>o.id!==r)),!0}catch(r){return console.error("Erro ao remover produto:",r),!1}},obterProdutoPorId:o=>r.find(r=>r.id===o)}}},18061:function(r,o,e){"use strict";e.d(o,{x:function(){return s}});var a=e(64090),i=e(32355);let t=async()=>{try{let r=await fetch("/api/unidades",{headers:(0,i.g)()});if(!r.ok)return n;let o=await r.json(),e=[...n];return o.forEach(r=>{e.find(o=>o.id===r.id)||e.push(r)}),e}catch(r){return console.error("Erro ao buscar unidades da API:",r),n}},n=[{id:"g",nome:"Gramas (g)"},{id:"kg",nome:"Quilogramas (kg)"},{id:"ml",nome:"Mililitros (ml)"},{id:"l",nome:"Litros (l)"},{id:"un",nome:"Unidade"},{id:"cx",nome:"Caixa"},{id:"pct",nome:"Pacote"}],s=()=>{let[r,o]=(0,a.useState)([]),[e,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{s(!0);let r=await t();console.log("Unidades loaded:",(null==r?void 0:r.length)||0),o(r)}catch(r){console.error("Erro ao carregar unidades de medida:",r),o([])}finally{s(!1)}})()},[]);let d=async(e,a)=>{try{if(n.find(r=>r.id===e))throw Error("J\xe1 existe uma unidade padr\xe3o com esta sigla");let t=await fetch("/api/unidades",{method:"POST",headers:(0,i.g)(),body:JSON.stringify({id:e,nome:a})});if(!t.ok)throw Error("Erro ao criar unidade");let s=await t.json(),d=[...r,s];return o(d),s}catch(r){return console.error("Erro ao adicionar unidade:",r),null}},u=async(e,a)=>{try{if(n.find(r=>r.id===e))throw Error("N\xe3o \xe9 poss\xedvel editar unidades padr\xe3o do sistema");let t=await fetch("/api/unidades/".concat(e),{method:"PUT",headers:(0,i.g)(),body:JSON.stringify({nome:a})});if(!t.ok)throw Error("Erro ao atualizar unidade");let s=await t.json(),d=r.map(r=>r.id===e?s:r);return o(d),s}catch(r){return console.error("Erro ao atualizar unidade:",r),null}},l=async e=>{try{if(n.find(r=>r.id===e))throw Error("N\xe3o \xe9 poss\xedvel deletar unidades padr\xe3o do sistema");if(!(await fetch("/api/unidades/".concat(e),{method:"DELETE",headers:(0,i.g)()})).ok)throw Error("Erro ao deletar unidade");let a=r.filter(r=>r.id!==e);return o(a),!0}catch(r){return console.error("Erro ao remover unidade:",r),!1}};return{unidades:r,isLoading:e,adicionarUnidade:d,atualizarUnidade:u,removerUnidade:l,obterUnidadePorId:o=>r.find(r=>r.id===o)}}},22169:function(r,o,e){"use strict";e.d(o,{cn:function(){return t}});var a=e(75504),i=e(51367);function t(){for(var r=arguments.length,o=Array(r),e=0;e<r;e++)o[e]=arguments[e];return(0,i.m6)((0,a.W)(o))}}},function(r){r.O(0,[869,2971,8069,1744],function(){return r(r.s=9173)}),_N_E=r.O()}]);