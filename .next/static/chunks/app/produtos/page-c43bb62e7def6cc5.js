(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6721],{21492:function(e,r,o){Promise.resolve().then(o.bind(o,87471))},87471:function(e,r,o){"use strict";o.r(r);var t=o(3827),a=o(64090),n=o(57418),i=o(20200),s=o(66651),c=o(15358),l=o(27742),d=o(8792);r.default=a.memo(function(){let{produtos:e,isLoading:r,removerProduto:o}=(0,l.U)(),[u,m]=(0,a.useState)(null),h=e=>{confirm("Tem certeza que deseja remover este insumo?")&&(o(e),m(null))},p=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Insumos"}),(0,t.jsx)(d.default,{href:"/produtos/novo",children:(0,t.jsxs)(s.default,{variant:"primary",children:[(0,t.jsx)("span",{className:"material-icons mr-1 text-sm",children:"add"}),"Novo Insumo"]})})]}),(0,t.jsx)(n.Z,{children:(0,t.jsx)(i.ZP,{headers:["Nome","Categoria","Unidade","Pre\xe7o","Fornecedor"],isLoading:r,emptyMessage:"Nenhum insumo cadastrado. Clique em 'Novo Insumo' para adicionar.",className:"text-sm",children:e.slice().sort((e,r)=>e.nome.localeCompare(r.nome)).map(e=>(0,t.jsxs)(i.SC,{className:"relative cursor-pointer",onClick:()=>m(e),children:[(0,t.jsx)(i.pj,{className:"font-medium text-gray-700",children:e.nome}),(0,t.jsx)(i.pj,{children:(0,l.obterLabelCategoriaFromRef)(e)}),(0,t.jsx)(i.pj,{children:e.unidadeMedida}),(0,t.jsx)(i.pj,{children:p(e.preco)}),(0,t.jsx)(i.pj,{children:e.fornecedor})]},e.id))})}),(0,t.jsx)(c.Z,{isOpen:!!u,onClose:()=>m(null),title:null==u?void 0:u.nome,children:u&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Categoria: ",(0,l.obterLabelCategoriaFromRef)(u)]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Pre\xe7o: ",p(u.preco)]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsxs)(d.default,{href:"/produtos/".concat(u.id),children:[" ",(0,t.jsx)(s.default,{variant:"secondary",fullWidth:!0,children:"Ver"})," "]}),(0,t.jsxs)(d.default,{href:"/produtos/".concat(u.id,"/editar"),children:[" ",(0,t.jsx)(s.default,{variant:"primary",fullWidth:!0,children:"Editar"})," "]}),(0,t.jsx)(s.default,{variant:"danger",fullWidth:!0,onClick:()=>h(u.id),children:"Excluir"})]})]})})]})})},66651:function(e,r,o){"use strict";o.d(r,{z:function(){return l}});var t=o(3827),a=o(64090),n=o(76371),i=o(49769),s=o(22169);let c=(0,i.j)("inline-flex items-center justify-center rounded-2xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:o,variant:a,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,t.jsx)(u,{className:(0,s.cn)(c({variant:a,size:i,className:o})),ref:r,...d})});l.displayName="Button"},57418:function(e,r,o){"use strict";var t=o(3827);o(64090),r.Z=e=>{let{children:r,title:o,className:a="",footer:n}=e;return(0,t.jsxs)("div",{className:"card overflow-hidden ".concat(a),children:[o&&(0,t.jsx)("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:(0,t.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:o})}),(0,t.jsx)("div",{className:"p-6",children:r}),n&&(0,t.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t",style:{borderColor:"var(--cor-borda)"},children:n})]})}},15358:function(e,r,o){"use strict";var t=o(3827),a=o(64090);r.Z=e=>{let{isOpen:r,onClose:o,title:n,children:i,width:s="md"}=e;return(0,a.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[r]),(0,t.jsxs)("div",{className:"fixed inset-0 z-50 ".concat(r?"":"pointer-events-none"),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black transition-opacity ".concat(r?"opacity-50":"opacity-0"),onClick:o}),(0,t.jsxs)("div",{className:"absolute right-0 top-0 h-full bg-white shadow-xl transform transition-transform ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"}[s]," ").concat(r?"translate-x-0":"translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-b",style:{borderColor:"var(--cor-borda)"},children:[(0,t.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:n}),(0,t.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-500",children:(0,t.jsx)("span",{className:"material-icons",children:"close"})})]}),(0,t.jsx)("div",{className:"p-4 overflow-y-auto h-full",children:i})]})]})}},20200:function(e,r,o){"use strict";o.d(r,{SC:function(){return n},pj:function(){return i}});var t=o(3827),a=o(64090);let n=e=>{let{children:r,className:o="",...a}=e;return(0,t.jsx)("tr",{className:"odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ".concat(o),...a,children:r})},i=e=>{let{children:r,className:o="",compact:a=!1}=e;return(0,t.jsx)("td",{className:"".concat(a?"px-2 py-2":"px-6 py-4"," text-sm ").concat(o),style:{color:"var(--cor-texto-secundario)"},children:r})};r.ZP=e=>{let{headers:r,children:o,className:n="",emptyMessage:i="Nenhum dado encontrado",isLoading:s=!1}=e;return(0,t.jsx)("div",{className:"w-full overflow-x-hidden rounded-lg border ".concat(n),style:{borderColor:"var(--cor-borda)"},children:(0,t.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:r.map((e,r)=>(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},r))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:s?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,t.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{className:"ml-2",children:"Carregando..."})]})})}):a.Children.count(o)>0?o:(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:i})})})]})})}},32355:function(e,r,o){"use strict";o.d(r,{g:function(){return t},x:function(){return a}});let t=()=>{var e,r;let o=null===(r=document.cookie)||void 0===r?void 0:null===(e=r.split("; ").find(e=>e.startsWith("sb-access-token=")))||void 0===e?void 0:e.split("=")[1];return{Authorization:o?"Bearer ".concat(o):""}},a={get:async e=>await fetch(e,{method:"GET",headers:{...t(),"Content-Type":"application/json"}}),post:async(e,r)=>await fetch(e,{method:"POST",headers:{...t(),"Content-Type":"application/json"},body:JSON.stringify(r)}),put:async(e,r)=>await fetch(e,{method:"PUT",headers:{...t(),"Content-Type":"application/json"},body:JSON.stringify(r)}),delete:async e=>await fetch(e,{method:"DELETE",headers:{...t(),"Content-Type":"application/json"}})}},27742:function(e,r,o){"use strict";o.d(r,{U:function(){return i},k:function(){return n}});var t=o(64090),a=o(32355);let n=async()=>{try{let e=await fetch("/api/produtos",{headers:(0,a.g)()});if(!e.ok)throw Error("Erro ao buscar produtos");return(await e.json()).map(e=>{var r,o;return{id:e.id,nome:e.nome,categoriaId:e.categoria,categoriaNome:null===(r=e.categoriaRef)||void 0===r?void 0:r.nome,marca:e.marca,unidadeId:e.unidadeMedida,unidadeNome:null===(o=e.unidadeRef)||void 0===o?void 0:o.nome,preco:Number(e.preco)||0,precoUnitario:e.precoUnitario?Number(e.precoUnitario):void 0,fornecedor:e.fornecedor,pesoEmbalagem:e.pesoEmbalagem?Number(e.pesoEmbalagem):void 0,imagem:e.imagem,ultimaMovimentacao:e.ultimaMovimentacao,infoNutricional:e.infoNutricional?{calorias:Number(e.infoNutricional.calorias),carboidratos:Number(e.infoNutricional.carboidratos),proteinas:Number(e.infoNutricional.proteinas),gordurasTotais:Number(e.infoNutricional.gordurasTotais),gordurasSaturadas:Number(e.infoNutricional.gordurasSaturadas),gordurasTrans:Number(e.infoNutricional.gordurasTrans),fibras:Number(e.infoNutricional.fibras),sodio:Number(e.infoNutricional.sodio)}:void 0}})}catch(e){return console.error("Erro ao buscar produtos da API:",e),[]}},i=()=>{let[e,r]=(0,t.useState)([]),[o,i]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async()=>{i(!0),r(await n()),i(!1)})()},[]),{produtos:e,isLoading:o,adicionarProduto:async e=>{try{let o={...e,precoUnitario:e.pesoEmbalagem?e.preco/e.pesoEmbalagem:void 0},t=await fetch("/api/produtos",{method:"POST",headers:{...(0,a.g)(),"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw Error("Erro ao adicionar produto");let n=await t.json();return r(e=>[...e,n]),n}catch(e){return console.error("Erro ao adicionar produto:",e),null}},atualizarProduto:async(e,o)=>{try{let t={...o,precoUnitario:o.pesoEmbalagem?o.preco/o.pesoEmbalagem:void 0},n=await fetch("/api/produtos/".concat(e),{method:"PUT",headers:{...(0,a.g)(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Erro ao atualizar produto");let i=await n.json();return r(r=>r.map(r=>r.id===e?i:r)),i}catch(e){return console.error("Erro ao atualizar produto:",e),null}},removerProduto:async e=>{try{if(!(await fetch("/api/produtos/".concat(e),{method:"DELETE",headers:(0,a.g)()})).ok)throw Error("Erro ao remover produto");return r(r=>r.filter(r=>r.id!==e)),!0}catch(e){return console.error("Erro ao remover produto:",e),!1}},obterProdutoPorId:r=>e.find(e=>e.id===r)}}},22169:function(e,r,o){"use strict";o.d(r,{cn:function(){return n}});var t=o(75504),a=o(51367);function n(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return(0,a.m6)((0,t.W)(r))}}},function(e){e.O(0,[869,8792,2971,8069,1744],function(){return e(e.s=21492)}),_N_E=e.O()}]);