"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{15238:function(e,r,a){a.r(r),a.d(r,{default:function(){return d}});var t=a(3827),o=a(64090),s=a(20200),n=a(66651),i=a(70492),l=a(32278),c=a(18061);function d(){let{unidades:e,adicionarUnidade:r,atualizarUnidade:a,removerUnidade:d}=(0,c.x)(),{isOpen:u,openModal:m,closeModal:x}=(0,i.d)(),{isOpen:h,openModal:p,closeModal:f}=(0,i.d)(),[v,y]=(0,o.useState)({id:"",nome:""}),[g,j]=(0,o.useState)({id:"",nome:""}),[b,w]=(0,o.useState)(""),N=(0,o.useRef)(null),C=(e,r)=>{j({id:e,nome:r}),p()},k=e.filter(e=>e.id.toLowerCase().includes(b.toLowerCase())||e.nome.toLowerCase().includes(b.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Unidades de Medida"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(n.Z,{onClick:m,variant:"primary",children:"➕ Nova Unidade"}),(0,t.jsx)(n.Z,{onClick:()=>{let r=JSON.stringify(e,null,2),a=new Blob([r],{type:"application/json"}),t=URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download="unidades.json",o.click(),URL.revokeObjectURL(t)},variant:"secondary",children:"⬇️ Exportar"}),(0,t.jsx)(n.Z,{onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},variant:"secondary",children:"⬆️ Importar"})]}),(0,t.jsx)("div",{className:"w-full sm:w-[220px]",children:(0,t.jsx)(l.Z,{label:"",placeholder:"Buscar...",value:b,onChange:e=>w(e.target.value),className:"h-[38px]"})})]}),(0,t.jsx)("input",{type:"file",ref:N,className:"hidden",accept:"application/json",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!t)return;let o=new FileReader;o.onload=()=>{try{JSON.parse(o.result).forEach(e=>e.id&&r(e.id,e.nome))}catch(e){console.error("Erro ao importar unidades",e)}},o.readAsText(t)}}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(s.ZP,{headers:["Sigla","Nome","A\xe7\xf5es"],children:k.map(e=>(0,t.jsxs)(s.SC,{children:[(0,t.jsx)(s.pj,{children:e.id}),(0,t.jsx)(s.pj,{children:e.nome}),(0,t.jsxs)(s.pj,{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Z,{size:"sm",variant:"secondary",onClick:()=>C(e.id,e.nome),children:"✏️ Editar"}),(0,t.jsx)(n.Z,{size:"sm",variant:"danger",onClick:()=>d(e.id),children:"\uD83D\uDDD1️ Excluir"})]})]},e.id))})}),(0,t.jsx)(i.Z,{isOpen:u,onClose:x,title:"Nova Unidade",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(v.id.trim(),v.nome.trim()),y({id:"",nome:""}),x()},className:"space-y-4",children:[(0,t.jsx)(l.Z,{label:"Sigla",value:v.id,onChange:e=>y({...v,id:e.target.value}),required:!0,className:"h-[38px]"}),(0,t.jsx)(l.Z,{label:"Nome",value:v.nome,onChange:e=>y({...v,nome:e.target.value}),required:!0,className:"h-[38px]"}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(n.Z,{type:"button",variant:"secondary",onClick:x,children:"Cancelar"}),(0,t.jsx)(n.Z,{type:"submit",variant:"primary",children:"Salvar"})]})]})}),(0,t.jsx)(i.Z,{isOpen:h,onClose:f,title:"Editar Unidade",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(g.id,g.nome.trim()),f()},className:"space-y-4",children:[(0,t.jsx)(l.Z,{label:"Sigla",value:g.id,disabled:!0,className:"h-[38px]"}),(0,t.jsx)(l.Z,{label:"Nome",value:g.nome,onChange:e=>j({...g,nome:e.target.value}),required:!0,className:"h-[38px]"}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(n.Z,{type:"button",variant:"secondary",onClick:f,children:"Cancelar"}),(0,t.jsx)(n.Z,{type:"submit",variant:"primary",children:"Salvar"})]})]})})]})}},66651:function(e,r,a){var t=a(3827);a(64090),r.Z=e=>{let{children:r,variant:a="primary",size:o="md",isLoading:s=!1,fullWidth:n=!1,className:i="",disabled:l,...c}=e,d=l||s?"opacity-50 cursor-not-allowed":"";return(0,t.jsxs)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-[var(--cor-acao)] text-white hover:brightness-90 focus:ring-[var(--cor-acao)]",secondary:"bg-[var(--cor-secundaria)] text-white hover:brightness-90 focus:ring-[var(--cor-secundaria)]",success:"bg-[var(--cor-sucesso)] text-white hover:brightness-90 focus:ring-[var(--cor-sucesso)]",danger:"bg-[var(--cor-erro)] text-white hover:brightness-90 focus:ring-[var(--cor-erro)]",outline:"bg-white text-[var(--cor-texto-principal)] border border-[var(--cor-borda)] hover:bg-gray-50 focus:ring-[var(--cor-acao)]"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[o]," ").concat(n?"w-full":""," ").concat(d," ").concat(i),disabled:l||s,...c,children:[s&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})}},32278:function(e,r,a){var t=a(3827);let o=(0,a(64090).forwardRef)((e,r)=>{let{label:a,error:o,helperText:s,className:n="",...i}=e;return(0,t.jsxs)("div",{className:"mb-4",children:[a&&(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--cor-texto-principal)"},children:a}),(0,t.jsx)("input",{ref:r,className:"w-full input ".concat(o?"border-[var(--cor-erro)]":""," ").concat(n),...i}),o&&(0,t.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--cor-erro)"},children:o}),s&&!o&&(0,t.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--cor-texto-secundario)"},children:s})]})});o.displayName="Input",r.Z=o},70492:function(e,r,a){a.d(r,{d:function(){return s}});var t=a(3827),o=a(64090);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[r,a]=(0,o.useState)(e);return{isOpen:r,openModal:()=>a(!0),closeModal:()=>a(!1),toggleModal:()=>a(!r)}};r.Z=e=>{let{isOpen:r,onClose:a,title:s,children:n,footer:i,size:l="md"}=e,[c,d]=(0,o.useState)(!1);return((0,o.useEffect)(()=>(r?(d(!0),document.body.style.overflow="hidden"):(setTimeout(()=>{d(!1)},200),document.body.style.overflow="auto"),()=>{document.body.style.overflow="auto"}),[r]),c||r)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 ".concat(r?"opacity-100":"opacity-0"," transition-opacity duration-200"),children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:a}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]," z-10 ").concat(r?"translate-y-0":"translate-y-4"," transition-transform duration-200"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:[(0,t.jsx)("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:s}),(0,t.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:a,children:[(0,t.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,t.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,t.jsx)("div",{className:"px-6 py-4",children:n}),i&&(0,t.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",style:{borderColor:"var(--cor-borda)"},children:i})]})]}):null}},20200:function(e,r,a){a.d(r,{SC:function(){return s},pj:function(){return n}});var t=a(3827),o=a(64090);let s=e=>{let{children:r,className:a="",...o}=e;return(0,t.jsx)("tr",{className:"odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ".concat(a),...o,children:r})},n=e=>{let{children:r,className:a="",compact:o=!1}=e;return(0,t.jsx)("td",{className:"".concat(o?"px-2 py-2":"px-6 py-4"," text-sm ").concat(a),style:{color:"var(--cor-texto-secundario)"},children:r})};r.ZP=e=>{let{headers:r,children:a,className:s="",emptyMessage:n="Nenhum dado encontrado",isLoading:i=!1}=e;return(0,t.jsx)("div",{className:"w-full overflow-x-hidden rounded-lg border ".concat(s),style:{borderColor:"var(--cor-borda)"},children:(0,t.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:r.map((e,r)=>(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},r))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:i?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,t.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{className:"ml-2",children:"Carregando..."})]})})}):o.Children.count(a)>0?a:(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:r.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:n})})})]})})}},32355:function(e,r,a){a.d(r,{g:function(){return o}});let t=()=>localStorage.getItem("auth_token"),o=()=>{let e=t();return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}},18061:function(e,r,a){a.d(r,{x:function(){return i}});var t=a(64090),o=a(32355);let s=async()=>{try{let e=await fetch("/api/unidades",{headers:(0,o.g)()});if(!e.ok)return n;let r=await e.json(),a=[...n];return r.forEach(e=>{a.find(r=>r.id===e.id)||a.push(e)}),a}catch(e){return console.error("Erro ao buscar unidades da API:",e),n}},n=[{id:"g",nome:"Gramas (g)"},{id:"kg",nome:"Quilogramas (kg)"},{id:"ml",nome:"Mililitros (ml)"},{id:"l",nome:"Litros (l)"},{id:"un",nome:"Unidade"},{id:"cx",nome:"Caixa"},{id:"pct",nome:"Pacote"}],i=()=>{let[e,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{i(!0);let e=await s();console.log("Unidades loaded:",(null==e?void 0:e.length)||0),r(e)}catch(e){console.error("Erro ao carregar unidades de medida:",e),r([])}finally{i(!1)}})()},[]);let l=async(a,t)=>{try{if(n.find(e=>e.id===a))throw Error("J\xe1 existe uma unidade padr\xe3o com esta sigla");let s=await fetch("/api/unidades",{method:"POST",headers:(0,o.g)(),body:JSON.stringify({id:a,nome:t})});if(!s.ok)throw Error("Erro ao criar unidade");let i=await s.json(),l=[...e,i];return r(l),i}catch(e){return console.error("Erro ao adicionar unidade:",e),null}},c=async(a,t)=>{try{if(n.find(e=>e.id===a))throw Error("N\xe3o \xe9 poss\xedvel editar unidades padr\xe3o do sistema");let s=await fetch("/api/unidades/".concat(a),{method:"PUT",headers:(0,o.g)(),body:JSON.stringify({nome:t})});if(!s.ok)throw Error("Erro ao atualizar unidade");let i=await s.json(),l=e.map(e=>e.id===a?i:e);return r(l),i}catch(e){return console.error("Erro ao atualizar unidade:",e),null}},d=async a=>{try{if(n.find(e=>e.id===a))throw Error("N\xe3o \xe9 poss\xedvel deletar unidades padr\xe3o do sistema");if(!(await fetch("/api/unidades/".concat(a),{method:"DELETE",headers:(0,o.g)()})).ok)throw Error("Erro ao deletar unidade");let t=e.filter(e=>e.id!==a);return r(t),!0}catch(e){return console.error("Erro ao remover unidade:",e),!1}};return{unidades:e,isLoading:a,adicionarUnidade:l,atualizarUnidade:c,removerUnidade:d,obterUnidadePorId:r=>e.find(e=>e.id===r)}}}}]);