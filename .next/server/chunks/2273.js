exports.id=2273,exports.ids=[2273],exports.modules={58359:()=>{},93739:()=>{},47834:(r,e,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,26840,23)),Promise.resolve().then(a.t.bind(a,38771,23)),Promise.resolve().then(a.t.bind(a,13225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,43982,23))},81731:()=>{},79956:(r,e,a)=>{"use strict";a.d(e,{Z:()=>t});var o=a(95344);a(3729);let t=({children:r,title:e,className:a="",footer:t})=>(0,o.jsxs)("div",{className:`card overflow-hidden ${a}`,children:[e&&o.jsx("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:o.jsx("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:e})}),o.jsx("div",{className:"p-6",children:r}),t&&o.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",style:{borderColor:"var(--cor-borda)"},children:t})]})},94287:(r,e,a)=>{"use strict";a.d(e,{g:()=>t});let o=()=>null,t=()=>{let r=o();return{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}}},76617:(r,e,a)=>{"use strict";a.d(e,{O:()=>c,Q:()=>s});var o=a(3729),t=a(94287);let i=async()=>{try{console.log("\uD83D\uDD0D Buscando categorias de receitas...");let r=await fetch("/api/categorias-receitas",{headers:(0,t.g)()});if(console.log(`ðŸ“¡ Response status: ${r.status}`),!r.ok){let e=await r.text();throw console.error(`âŒ Erro na API categorias-receitas: ${r.status} - ${e}`),Error(`Erro ao buscar categorias de receitas: ${r.status}`)}let e=await r.json();return console.log(`âœ… Categorias de receitas carregadas: ${e.length}`),e}catch(r){return console.error("âŒ Erro ao buscar categorias de receitas:",r),[]}},n=[{id:"",nome:"Entrada"},{id:"",nome:"Prato Principal"},{id:"",nome:"Acompanhamento"},{id:"",nome:"Sobremesa"},{id:"",nome:"Bebida"},{id:"",nome:"Molho/Condimento"},{id:"",nome:"Outro"}],c=()=>{let[r,e]=(0,o.useState)([]),[a,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let r=!0;return(async()=>{try{if(!r)return;c(!0);let a=await i();if(!r)return;if(0===a.length){for(let e of n){if(!r)return;try{let r=await fetch("/api/categorias-receitas",{method:"POST",headers:(0,t.g)(),body:JSON.stringify({nome:e.nome})});if(r.ok){let e=await r.json();a.push(e)}else 409===r.status&&console.log(`Categoria de receita '${e.nome}' j\xe1 existe, pulando...`)}catch(r){console.error("Erro ao criar categoria de receita padr\xe3o:",r)}}r&&(a=await i())}r&&e(a)}catch(a){console.error("Erro ao carregar categorias de receitas:",a),r&&e([])}finally{r&&c(!1)}})(),()=>{r=!1}},[]),{categorias:r,isLoading:a,adicionar:async r=>{try{let a=await fetch("/api/categorias-receitas",{method:"POST",headers:(0,t.g)(),body:JSON.stringify({nome:r})});if(!a.ok)throw Error("Erro ao adicionar categoria");let o=await a.json();return e(r=>[...r,o]),o}catch(r){return console.error("Erro ao adicionar categoria:",r),null}},atualizar:async(r,a)=>{try{let o=await fetch(`/api/categorias-receitas/${r}`,{method:"PUT",headers:(0,t.g)(),body:JSON.stringify({nome:a})});if(!o.ok)throw Error("Erro ao atualizar categoria");let i=await o.json();return e(e=>e.map(e=>e.id===r?i:e)),!0}catch(r){return console.error("Erro ao atualizar categoria:",r),!1}},remover:async r=>{try{if(!(await fetch(`/api/categorias-receitas/${r}`,{method:"DELETE",headers:(0,t.g)()})).ok)throw Error("Erro ao remover categoria");return e(e=>e.filter(e=>e.id!==r)),!0}catch(r){return console.error("Erro ao remover categoria:",r),!1}},obterPorId:e=>r.find(r=>r.id===e)}},s=(r,e=[])=>{if(!r)return"N\xe3o informado";let a=e.find(e=>e.id===r);return a?a.nome:r.length>20?"Categoria n\xe3o encontrada":r}},34962:(r,e,a)=>{"use strict";a.d(e,{Gm:()=>d,IO:()=>f,N2:()=>g,Q_:()=>i.Q,eW:()=>m,gZ:()=>p,lB:()=>s,vG:()=>u,vT:()=>b,zP:()=>c});var o=a(3729),t=a(94287),i=a(76617);let n={g:{tipo:"peso",fator:1},kg:{tipo:"peso",fator:1e3},ml:{tipo:"volume",fator:1},l:{tipo:"volume",fator:1e3},un:{tipo:"unidade",fator:1},cx:{tipo:"unidade",fator:1},pct:{tipo:"unidade",fator:1}},c=(r,e,a)=>{let o=n[e],t=n[a];return o&&t&&o.tipo===t.tipo?r*o.fator/t.fator:r},s=async()=>{try{let r=await fetch("/api/fichas-tecnicas",{headers:(0,t.g)()});if(!r.ok)throw Error(`Erro ao buscar fichas t\xe9cnicas: ${r.status}`);return await r.json()}catch(r){return console.error("Error loading fichas t\xe9cnicas:",r),[]}},l=(r,e)=>r.reduce((r,a)=>{let o=e.find(r=>r.id===a.produtoId);if(!o)return r;let t=a.unidade||o.unidadeMedida,i=n[t]?.tipo;if("peso"===i)return r+c(a.quantidade,t,"g");if("volume"===i)return r+c(a.quantidade,t,"ml");{let e=o.pesoEmbalagem||n[o.unidadeMedida]?.fator||1;return r+c(a.quantidade,t,o.unidadeMedida)*e}},0),d=(r,e,a)=>{let o=n[e]?.tipo;return"peso"===o||"volume"===o?c(l(r,a),"peso"===o?"g":"ml",e):r.reduce((r,o)=>{let t=a.find(r=>r.id===o.produtoId),i=o.unidade||t?.unidadeMedida||"un";return r+c(o.quantidade,i,e)},0)},u=()=>{let[r,e]=(0,o.useState)([]),[a,t]=(0,o.useState)(!1);return{fichasTecnicas:r,isLoading:a,setFichasTecnicas:e,setIsLoading:t,obterFichaTecnicaPorId:e=>r.find(r=>r.id===e),calcularRendimentoTotal:d,atualizarFichaTecnica:h,removerFichaTecnica:g}},f=async r=>{try{let e=await fetch(`/api/fichas-tecnicas/${r}`,{headers:(0,t.g)()});if(!e.ok){if(404===e.status)return null;throw Error("Erro ao buscar ficha t\xe9cnica")}let a=await e.json();return{...a,dataCriacao:a.createdAt?new Date(a.createdAt).toLocaleDateString("pt-BR"):"Data n\xe3o dispon\xedvel",dataModificacao:a.updatedAt?new Date(a.updatedAt).toLocaleDateString("pt-BR"):"Data n\xe3o dispon\xedvel",tempoPreparo:parseInt(a.tempoPreparo)||0,custoTotal:Number(a.custoTotal)||0,custoPorcao:Number(a.custoPorcao)||0,custoPorKg:a.custoTotal&&a.rendimentoTotal?a.custoTotal/a.rendimentoTotal*1e3:0}}catch(r){return console.error("Erro ao buscar ficha t\xe9cnica por ID:",r),null}},m=async r=>{try{let e=await fetch("/api/fichas-tecnicas",{method:"POST",headers:(0,t.g)(),body:JSON.stringify(r)});if(!e.ok){let r=await e.text();throw console.error("Erro na resposta da API:",e.status,r),Error(`Erro ao criar ficha t\xe9cnica: ${e.status}`)}return await e.json()}catch(r){return console.error("Erro ao adicionar ficha t\xe9cnica:",r),null}},h=async(r,e)=>{try{let a=await fetch(`/api/fichas-tecnicas/${r}`,{method:"PUT",headers:(0,t.g)(),body:JSON.stringify(e)});if(!a.ok)throw Error("Erro ao atualizar ficha t\xe9cnica");return await a.json()}catch(r){return console.error("Erro ao atualizar ficha t\xe9cnica:",r),null}},g=async r=>{try{if(!(await fetch(`/api/fichas-tecnicas/${r}`,{method:"DELETE",headers:(0,t.g)()})).ok)throw Error("Erro ao deletar ficha t\xe9cnica");return!0}catch(r){return console.error("Erro ao remover ficha t\xe9cnica:",r),!1}},p=[{value:"porcoes",label:"Por\xe7\xf5es"},{value:"unidades",label:"Unidades"},{value:"kg",label:"Quilogramas (kg)"},{value:"g",label:"Gramas (g)"},{value:"l",label:"Litros (l)"},{value:"ml",label:"Mililitros (ml)"}],b=r=>{let e=p.find(e=>e.value===r);return e?e.label:r}},48806:(r,e,a)=>{"use strict";a.d(e,{Ug:()=>c,k0:()=>n,u5:()=>d,ub:()=>l});var o=a(3729),t=a(34962),i=a(94287);let n=async()=>{try{let r=await fetch("/api/produtos",{headers:(0,i.g)()});if(!r.ok)throw Error("Erro ao buscar produtos");return(await r.json()).map(r=>({...r,categoria:r.categoriaRef?.nome||r.categoria||"",categoriaId:r.categoria,preco:Number(r.preco)||0,precoUnitario:r.precoUnitario?Number(r.precoUnitario):void 0,pesoEmbalagem:r.pesoEmbalagem?Number(r.pesoEmbalagem):void 0,categoriaRef:r.categoriaRef,unidadeRef:r.unidadeRef,unidadeMedida:r.unidadeRef?.nome||r.unidadeMedida,infoNutricional:r.infoNutricional?{calorias:Number(r.infoNutricional.calorias)||0,carboidratos:Number(r.infoNutricional.carboidratos)||0,proteinas:Number(r.infoNutricional.proteinas)||0,gordurasTotais:Number(r.infoNutricional.gordurasTotais)||0,gordurasSaturadas:Number(r.infoNutricional.gordurasSaturadas)||0,gordurasTrans:Number(r.infoNutricional.gordurasTrans)||0,fibras:Number(r.infoNutricional.fibras)||0,sodio:Number(r.infoNutricional.sodio)||0}:void 0}))}catch(r){return console.error("Erro ao buscar produtos da API:",r),[]}},c=()=>{let[r,e]=(0,o.useState)([]),[a,c]=(0,o.useState)(!0),{fichasTecnicas:s}=(0,t.vG)();(0,o.useEffect)(()=>{(async()=>{try{c(!0);let r=await n();console.log("Produtos loaded:",r?.length||0),e(r)}catch(r){console.error("Erro ao carregar produtos:",r),e([])}finally{c(!1)}})()},[]);let l=async a=>{try{let o={...a,precoUnitario:a.pesoEmbalagem&&a.pesoEmbalagem>0?a.preco/a.pesoEmbalagem:void 0},t=await fetch("/api/produtos",{method:"POST",headers:(0,i.g)(),body:JSON.stringify(o)});if(!t.ok)throw Error("Erro ao criar produto");let n=await t.json(),c=[...r,n];return e(c),n}catch(r){return console.error("Erro ao adicionar produto:",r),null}},d=async(a,o)=>{try{let t={...o,precoUnitario:o.pesoEmbalagem&&o.pesoEmbalagem>0?o.preco/o.pesoEmbalagem:void 0},n=await fetch(`/api/produtos/${a}`,{method:"PUT",headers:(0,i.g)(),body:JSON.stringify(t)});if(!n.ok)throw Error("Erro ao atualizar produto");let c=await n.json(),s=r.map(r=>r.id===a?c:r);return e(s),c}catch(r){return console.error("Erro ao atualizar produto:",r),null}},u=async a=>{try{if(!(await fetch(`/api/produtos/${a}`,{method:"DELETE",headers:(0,i.g)()})).ok)throw Error("Erro ao deletar produto");let o=r.filter(r=>r.id!==a);return e(o),!0}catch(r){return console.error("Erro ao remover produto:",r),!1}};return{produtos:(0,o.useMemo)(()=>r,[r]),isLoading:a,adicionarProduto:l,atualizarProduto:d,removerProduto:u,obterProdutoPorId:e=>r.find(r=>r.id===e)}},s=[{value:"hortifruti",label:"Hortifruti"},{value:"carnes",label:"Carnes"},{value:"laticinios",label:"Latic\xednios"},{value:"graos",label:"Gr\xe3os e Cereais"},{value:"bebidas",label:"Bebidas"},{value:"temperos",label:"Temperos"},{value:"outros",label:"Outros"}],l=(r,e=[])=>{if(!r)return"N\xe3o informado";let a=e.find(e=>e.id===r);if(a)return a.nome;let o=e.find(e=>e.nome===r);if(o)return o.nome;let t=s.find(e=>e.value===r);return t?t.label:r.length>10&&(r.includes("-")||r.includes("c"))?"Categoria n\xe3o encontrada":r},d=r=>{if(r.categoriaRef?.nome)return r.categoriaRef.nome;if(r.categoria&&"null"!==r.categoria&&""!==r.categoria.trim()){if(r.categoria.length<20&&!r.categoria.includes("-")&&!r.categoria.startsWith("c"))return r.categoria;let e=s.find(e=>e.value===r.categoria);if(e)return e.label}return"N\xe3o informado"}},75459:(r,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var o=a(25036);a(5023);var t=a(7439),i=a(77497);let n=()=>{let r=(0,t.cookies)();return(0,i.createServerClient)("https://sutmfzcmrlqnocsusiav.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1dG1memNtcmxxbm9jc3VzaWF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1MzgwODMsImV4cCI6MjA2NjExNDA4M30.BQRo64qRNzqB_XGNeSe4jkZ8Mzzji8eUYVbS_nWw8tI",{cookies:{get:e=>r.get(e)?.value}})};async function c({children:r}){let e=n(),{data:{user:a}}=await e.auth.getUser();return o.jsx("html",{lang:"pt-br",children:o.jsx("body",{children:r})})}},73881:(r,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>t});var o=a(70337);let t=r=>[{type:"image/x-icon",sizes:"16x16",url:(0,o.fillMetadataSegment)(".",r.params,"favicon.ico")+""}]},5023:()=>{}};