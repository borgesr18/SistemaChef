"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},13253:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>h,originalPathname:()=>w,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>f});var t={};a.r(t),a.d(t,{POST:()=>c});var i=a(95419),s=a(69108),o=a(99678),n=a(78070),u=a(69458);async function c(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return n.Z.json({error:"Database not available during build"},{status:503});await (0,u.jZ)();let{nome:r,email:a,senha:t,role:i}=await e.json();if(await (0,u.mY)(a))return n.Z.json({error:"Email j\xe1 cadastrado"},{status:400});if(!(0,u.O5)(t))return n.Z.json({error:"Senha fraca"},{status:400});let s=await (0,u.EO)({nome:r,email:a,senhaHash:(0,u.nj)(t),role:i||"viewer",oculto:!1});return n.Z.json({id:s.id,nome:s.nome,email:s.email,role:s.role})}catch(e){if(console.error("Register error:",e),e instanceof Error&&"Insufficient permissions"===e.message)return n.Z.json({error:"Permiss\xf5es insuficientes"},{status:403});return n.Z.json({error:"Erro interno do servidor"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/workspaces/SistemaChef/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:m,headerHooks:h,staticGenerationBailout:f}=d,w="/api/auth/register/route";function g(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},19631:(e,r,a)=>{a.d(r,{_:()=>i});let t=require("@prisma/client"),i=globalThis.prisma??new t.PrismaClient},69458:(e,r,a)=>{a.d(r,{EO:()=>d,I7:()=>c,O5:()=>p,jZ:()=>u,mY:()=>l,nj:()=>o,rV:()=>n});var t=a(7529),i=a(19631);let s="rba1807@gmail.com",o=e=>t.ZP.hashSync(e,10),n=(e,r)=>t.ZP.compareSync(e,r),u=async()=>{"phase-production-build"!==process.env.NEXT_PHASE&&(await i._.usuario.findUnique({where:{email:s}})||await i._.usuario.create({data:{nome:"Admin",email:s,senhaHash:o("Rb180780@"),role:"admin",oculto:!0}}))},c=async()=>(await u(),await i._.usuario.findMany()),d=async e=>await i._.usuario.create({data:e}),l=async e=>(await u(),await i._.usuario.findUnique({where:{email:e}})),p=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{8,}$/.test(e)}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[1638,6206,7529],()=>a(13253));module.exports=t})();