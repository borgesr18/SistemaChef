(()=>{var e={};e.id=6721,e.ids=[6721],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},55126:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var o=t(50482),a=t(69108),s=t(62563),i=t.n(s),n=t(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let c=["",{children:["produtos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3039)),"/workspaces/SistemaChef/src/app/produtos/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,57793)),"/workspaces/SistemaChef/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/workspaces/SistemaChef/src/app/produtos/page.tsx"],u="/produtos/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new o.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/produtos/page",pathname:"/produtos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},37108:(e,r,t)=>{Promise.resolve().then(t.bind(t,20662))},20662:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var o=t(95344),a=t(3729),s=t.n(a),i=t(79956),n=t(19865),l=t(34034),c=t(39726),d=t(48806),u=t(56506);let p=s().memo(function(){let{produtos:e,isLoading:r,removerProduto:t}=(0,d.U)(),[s,p]=(0,a.useState)(null),m=e=>{confirm("Tem certeza que deseja remover este insumo?")&&(t(e),p(null))},x=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Insumos"}),o.jsx(u.default,{href:"/produtos/novo",children:(0,o.jsxs)(l.default,{variant:"primary",children:[o.jsx("span",{className:"material-icons mr-1 text-sm",children:"add"}),"Novo Insumo"]})})]}),o.jsx(i.Z,{children:o.jsx(n.ZP,{headers:["Nome","Categoria","Unidade","Pre\xe7o","Fornecedor"],isLoading:r,emptyMessage:"Nenhum insumo cadastrado. Clique em 'Novo Insumo' para adicionar.",className:"text-sm",children:e.slice().sort((e,r)=>e.nome.localeCompare(r.nome)).map(e=>(0,o.jsxs)(n.SC,{className:"relative cursor-pointer",onClick:()=>p(e),children:[o.jsx(n.pj,{className:"font-medium text-gray-700",children:e.nome}),o.jsx(n.pj,{children:(0,d.obterLabelCategoriaFromRef)(e)}),o.jsx(n.pj,{children:e.unidadeMedida}),o.jsx(n.pj,{children:x(e.preco)}),o.jsx(n.pj,{children:e.fornecedor})]},e.id))})}),o.jsx(c.Z,{isOpen:!!s,onClose:()=>p(null),title:s?.nome,children:s&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Categoria: ",(0,d.obterLabelCategoriaFromRef)(s)]}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Pre\xe7o: ",x(s.preco)]}),(0,o.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,o.jsxs)(u.default,{href:`/produtos/${s.id}`,children:[" ",o.jsx(l.default,{variant:"secondary",fullWidth:!0,children:"Ver"})," "]}),(0,o.jsxs)(u.default,{href:`/produtos/${s.id}/editar`,children:[" ",o.jsx(l.default,{variant:"primary",fullWidth:!0,children:"Editar"})," "]}),o.jsx(l.default,{variant:"danger",fullWidth:!0,onClick:()=>m(s.id),children:"Excluir"})]})]})})]})})},79956:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var o=t(95344);t(3729);let a=({children:e,title:r,className:t="",footer:a})=>(0,o.jsxs)("div",{className:`card overflow-hidden ${t}`,children:[r&&o.jsx("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--cor-borda)"},children:o.jsx("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:r})}),o.jsx("div",{className:"p-6",children:e}),a&&o.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",style:{borderColor:"var(--cor-borda)"},children:a})]})},39726:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var o=t(95344),a=t(3729);let s=({isOpen:e,onClose:r,title:t,children:s,width:i="md"})=>((0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),(0,o.jsxs)("div",{className:`fixed inset-0 z-50 ${e?"":"pointer-events-none"}`,children:[o.jsx("div",{className:`absolute inset-0 bg-black transition-opacity ${e?"opacity-50":"opacity-0"}`,onClick:r}),(0,o.jsxs)("div",{className:`absolute right-0 top-0 h-full bg-white shadow-xl transform transition-transform ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"}[i]} ${e?"translate-x-0":"translate-x-full"}`,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-b",style:{borderColor:"var(--cor-borda)"},children:[o.jsx("h3",{className:"text-lg font-medium",style:{color:"var(--cor-texto-principal)"},children:t}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:o.jsx("span",{className:"material-icons",children:"close"})})]}),o.jsx("div",{className:"p-4 overflow-y-auto h-full",children:s})]})]}))},19865:(e,r,t)=>{"use strict";t.d(r,{SC:()=>i,ZP:()=>l,pj:()=>n});var o=t(95344),a=t(3729),s=t.n(a);let i=({children:e,className:r="",...t})=>o.jsx("tr",{className:`odd:bg-gray-50 hover:bg-[var(--cor-secundaria)/10] hover:shadow-sm rounded-lg ${r}`,...t,children:e}),n=({children:e,className:r="",compact:t=!1})=>o.jsx("td",{className:`${t?"px-2 py-2":"px-6 py-4"} text-sm ${r}`,style:{color:"var(--cor-texto-secundario)"},children:e}),l=({headers:e,children:r,className:t="",emptyMessage:a="Nenhum dado encontrado",isLoading:i=!1})=>o.jsx("div",{className:`w-full overflow-x-hidden rounded-lg border ${t}`,style:{borderColor:"var(--cor-borda)"},children:(0,o.jsxs)("table",{className:"w-full table-fixed divide-y",style:{borderColor:"var(--cor-borda)"},children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsx("tr",{children:e.map((e,r)=>o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--cor-texto-secundario)"},children:e},r))})}),o.jsx("tbody",{className:"bg-white divide-y",style:{borderColor:"var(--cor-borda)"},children:i?o.jsx("tr",{children:o.jsx("td",{colSpan:e.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:(0,o.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,o.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"ml-2",children:"Carregando..."})]})})}):s().Children.count(r)>0?r:o.jsx("tr",{children:o.jsx("td",{colSpan:e.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:a})})})]})})},94287:(e,r,t)=>{"use strict";t.d(r,{g:()=>o,x:()=>a});let o=()=>{let e=document.cookie?.split("; ").find(e=>e.startsWith("sb-access-token="))?.split("=")[1];return{Authorization:e?`Bearer ${e}`:""}},a={get:async e=>await fetch(e,{method:"GET",headers:{...o(),"Content-Type":"application/json"}}),post:async(e,r)=>await fetch(e,{method:"POST",headers:{...o(),"Content-Type":"application/json"},body:JSON.stringify(r)}),put:async(e,r)=>await fetch(e,{method:"PUT",headers:{...o(),"Content-Type":"application/json"},body:JSON.stringify(r)}),delete:async e=>await fetch(e,{method:"DELETE",headers:{...o(),"Content-Type":"application/json"}})}},48806:(e,r,t)=>{"use strict";t.d(r,{U:()=>i,k:()=>s});var o=t(3729),a=t(94287);let s=async()=>{try{let e=await fetch("/api/produtos",{headers:(0,a.g)()});if(!e.ok)throw Error("Erro ao buscar produtos");return(await e.json()).map(e=>({id:e.id,nome:e.nome,categoriaId:e.categoria,categoriaNome:e.categoriaRef?.nome,marca:e.marca,unidadeId:e.unidadeMedida,unidadeNome:e.unidadeRef?.nome,preco:Number(e.preco)||0,precoUnitario:e.precoUnitario?Number(e.precoUnitario):void 0,fornecedor:e.fornecedor,pesoEmbalagem:e.pesoEmbalagem?Number(e.pesoEmbalagem):void 0,imagem:e.imagem,ultimaMovimentacao:e.ultimaMovimentacao,infoNutricional:e.infoNutricional?{calorias:Number(e.infoNutricional.calorias),carboidratos:Number(e.infoNutricional.carboidratos),proteinas:Number(e.infoNutricional.proteinas),gordurasTotais:Number(e.infoNutricional.gordurasTotais),gordurasSaturadas:Number(e.infoNutricional.gordurasSaturadas),gordurasTrans:Number(e.infoNutricional.gordurasTrans),fibras:Number(e.infoNutricional.fibras),sodio:Number(e.infoNutricional.sodio)}:void 0}))}catch(e){return console.error("Erro ao buscar produtos da API:",e),[]}},i=()=>{let[e,r]=(0,o.useState)([]),[t,i]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{i(!0),r(await s()),i(!1)})()},[]),{produtos:e,isLoading:t,adicionarProduto:async e=>{try{let t={...e,precoUnitario:e.pesoEmbalagem?e.preco/e.pesoEmbalagem:void 0},o=await fetch("/api/produtos",{method:"POST",headers:{...(0,a.g)(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw Error("Erro ao adicionar produto");let s=await o.json();return r(e=>[...e,s]),s}catch(e){return console.error("Erro ao adicionar produto:",e),null}},atualizarProduto:async(e,t)=>{try{let o={...t,precoUnitario:t.pesoEmbalagem?t.preco/t.pesoEmbalagem:void 0},s=await fetch(`/api/produtos/${e}`,{method:"PUT",headers:{...(0,a.g)(),"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw Error("Erro ao atualizar produto");let i=await s.json();return r(r=>r.map(r=>r.id===e?i:r)),i}catch(e){return console.error("Erro ao atualizar produto:",e),null}},removerProduto:async e=>{try{if(!(await fetch(`/api/produtos/${e}`,{method:"DELETE",headers:(0,a.g)()})).ok)throw Error("Erro ao remover produto");return r(r=>r.filter(r=>r.id!==e)),!0}catch(e){return console.error("Erro ao remover produto:",e),!1}},obterProdutoPorId:r=>e.find(e=>e.id===r)}}},3039:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>s,__esModule:()=>a,default:()=>i});let o=(0,t(86843).createProxy)(String.raw`/workspaces/SistemaChef/src/app/produtos/page.tsx`),{__esModule:a,$$typeof:s}=o,i=o.default}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,782,337,6408,5413],()=>t(55126));module.exports=o})();