(()=>{var e={};e.id=2163,e.ids=[2163],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},20091:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var o=a(50482),t=a(69108),i=a(62563),s=a.n(i),n=a(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(r,l);let d=["",{children:["produtos",{children:["[id]",{children:["editar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,85664)),"/workspaces/SistemaChef/src/app/produtos/[id]/editar/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,57793)),"/workspaces/SistemaChef/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/workspaces/SistemaChef/src/app/produtos/[id]/editar/page.tsx"],u="/produtos/[id]/editar/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/produtos/[id]/editar/page",pathname:"/produtos/[id]/editar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},24897:(e,r,a)=>{Promise.resolve().then(a.bind(a,94797))},94797:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>g});var o=a(95344),t=a(3729),i=a(8428),s=a(79956),n=a(10342),l=a(98649),d=a(34034),c=a(48806),u=a(5175),m=a(6158),p=a(42283);function g(){let e=(0,i.useParams)(),r=(0,i.useRouter)(),{obterProdutoPorId:a,atualizarProduto:g,isLoading:f}=(0,c.Ug)(),{categorias:b}=(0,m.D)(),{unidades:h}=(0,u.x)(),[x,N]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[E,j]=(0,t.useState)("");(0,t.useEffect)(()=>{if(!E)return;let e=setTimeout(()=>j(""),3e3);return()=>clearTimeout(e)},[E]);let w=e.id,[S,C]=(0,t.useState)({nome:"",categoria:"",marca:"",unidadeMedida:"",preco:"",fornecedor:"",pesoEmbalagem:"",infoNutricional:{calorias:"",carboidratos:"",proteinas:"",gordurasTotais:"",gordurasSaturadas:"",gordurasTrans:"",fibras:"",sodio:""}}),[T,P]=(0,t.useState)({});if((0,t.useEffect)(()=>{if(f)return;let e=a(w);if(!e){r.push("/produtos");return}C({nome:e.nome,categoria:e.categoria||"",marca:e.marca||"",unidadeMedida:e.unidadeMedida,preco:e.preco?.toString()||"",fornecedor:e.fornecedor,pesoEmbalagem:e.pesoEmbalagem?.toString()||"",infoNutricional:{calorias:e.infoNutricional?.calorias?.toString()||"",carboidratos:e.infoNutricional?.carboidratos?.toString()||"",proteinas:e.infoNutricional?.proteinas?.toString()||"",gordurasTotais:e.infoNutricional?.gordurasTotais?.toString()||"",gordurasSaturadas:e.infoNutricional?.gordurasSaturadas?.toString()||"",gordurasTrans:e.infoNutricional?.gordurasTrans?.toString()||"",fibras:e.infoNutricional?.fibras?.toString()||"",sodio:e.infoNutricional?.sodio?.toString()||""}}),y(!!e.infoNutricional)},[f,w]),f)return o.jsx("p",{children:"Carregando..."});let k=e=>{let{name:r,value:a}=e.target;if(r.includes(".")){let[e,o]=r.split(".");C(r=>({...r,[e]:{...r[e],[o]:a}}))}else C(e=>({...e,[r]:a}))},$=()=>{let e={};if(S.nome||(e.nome="Nome \xe9 obrigat\xf3rio"),S.categoria||(e.categoria="Categoria \xe9 obrigat\xf3ria"),S.unidadeMedida||(e.unidadeMedida="Unidade de medida \xe9 obrigat\xf3ria"),S.preco?(isNaN(Number(S.preco))||0>=Number(S.preco))&&(e.preco="Pre\xe7o deve ser um n\xfamero positivo"):e.preco="Pre\xe7o \xe9 obrigat\xf3rio",S.fornecedor||(e.fornecedor="Fornecedor \xe9 obrigat\xf3rio"),(!S.pesoEmbalagem||isNaN(Number(S.pesoEmbalagem))||0>=Number(S.pesoEmbalagem))&&(e.pesoEmbalagem="Informe o peso por embalagem"),v){let r=S.infoNutricional;r.calorias&&isNaN(Number(r.calorias))&&(e["infoNutricional.calorias"]="Deve ser um n\xfamero"),r.carboidratos&&isNaN(Number(r.carboidratos))&&(e["infoNutricional.carboidratos"]="Deve ser um n\xfamero"),r.proteinas&&isNaN(Number(r.proteinas))&&(e["infoNutricional.proteinas"]="Deve ser um n\xfamero"),r.gordurasTotais&&isNaN(Number(r.gordurasTotais))&&(e["infoNutricional.gordurasTotais"]="Deve ser um n\xfamero"),r.gordurasSaturadas&&isNaN(Number(r.gordurasSaturadas))&&(e["infoNutricional.gordurasSaturadas"]="Deve ser um n\xfamero"),r.gordurasTrans&&isNaN(Number(r.gordurasTrans))&&(e["infoNutricional.gordurasTrans"]="Deve ser um n\xfamero"),r.fibras&&isNaN(Number(r.fibras))&&(e["infoNutricional.fibras"]="Deve ser um n\xfamero"),r.sodio&&isNaN(Number(r.sodio))&&(e["infoNutricional.sodio"]="Deve ser um n\xfamero")}return P(e),0===Object.keys(e).length};return(0,o.jsxs)("div",{className:"space-y-6",children:[o.jsx(p.Z,{message:E,onClose:()=>j("")}),o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Editar Insumo"}),o.jsx("form",{onSubmit:e=>{if(e.preventDefault(),$()){N(!0);try{let e={...S,preco:Number(S.preco),pesoEmbalagem:Number(S.pesoEmbalagem),infoNutricional:v?{calorias:Number(S.infoNutricional.calorias)||0,carboidratos:Number(S.infoNutricional.carboidratos)||0,proteinas:Number(S.infoNutricional.proteinas)||0,gordurasTotais:Number(S.infoNutricional.gordurasTotais)||0,gordurasSaturadas:Number(S.infoNutricional.gordurasSaturadas)||0,gordurasTrans:Number(S.infoNutricional.gordurasTrans)||0,fibras:Number(S.infoNutricional.fibras)||0,sodio:Number(S.infoNutricional.sodio)||0}:void 0};g(w,e),r.push(`/produtos/${w}`)}catch(e){console.error("Erro ao atualizar produto:",e),j("Erro ao atualizar produto")}finally{N(!1)}}},children:(0,o.jsxs)(s.Z,{children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(n.Z,{label:"Nome do Insumo *",name:"nome",value:S.nome,onChange:k,error:T.nome,placeholder:"Ex: Farinha de Trigo"}),o.jsx(l.Z,{label:"Categoria *",name:"categoria",value:S.categoria,onChange:k,options:b.map(e=>({value:e.id,label:e.nome})).sort((e,r)=>e.label.localeCompare(r.label)),error:T.categoria}),o.jsx(n.Z,{label:"Marca",name:"marca",value:S.marca,onChange:k,placeholder:"Ex: Dona Benta"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(l.Z,{label:"Unidade de Medida *",name:"unidadeMedida",value:S.unidadeMedida,onChange:k,options:h.map(e=>({value:e.id,label:e.nome})).sort((e,r)=>e.label.localeCompare(r.label)),error:T.unidadeMedida}),o.jsx(n.Z,{label:"Pre\xe7o (R$) *",name:"preco",type:"number",step:"0.01",min:"0",value:S.preco,onChange:k,error:T.preco,placeholder:"Ex: 5.99"}),o.jsx(n.Z,{label:"Fornecedor *",name:"fornecedor",value:S.fornecedor,onChange:k,error:T.fornecedor,placeholder:"Ex: Distribuidora Alimentos"}),o.jsx(n.Z,{label:"Peso/Volume por Embalagem (g ou ml) *",name:"pesoEmbalagem",type:"number",min:"0",value:S.pesoEmbalagem,onChange:k,error:T.pesoEmbalagem,placeholder:"Ex: 1000"})]}),(0,o.jsxs)("div",{className:"border-t pt-4",children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[o.jsx("input",{type:"checkbox",id:"mostrarInfoNutricional",checked:v,onChange:()=>y(!v),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),o.jsx("label",{htmlFor:"mostrarInfoNutricional",className:"ml-2 text-sm font-medium text-gray-700",children:"Adicionar informa\xe7\xf5es nutricionais (por 100g/100ml)"})]}),v&&(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(n.Z,{label:"Calorias (kcal)",name:"infoNutricional.calorias",type:"number",min:"0",value:S.infoNutricional.calorias,onChange:k,error:T["infoNutricional.calorias"]}),o.jsx(n.Z,{label:"Carboidratos (g)",name:"infoNutricional.carboidratos",type:"number",min:"0",step:"0.1",value:S.infoNutricional.carboidratos,onChange:k,error:T["infoNutricional.carboidratos"]}),o.jsx(n.Z,{label:"Prote\xednas (g)",name:"infoNutricional.proteinas",type:"number",min:"0",step:"0.1",value:S.infoNutricional.proteinas,onChange:k,error:T["infoNutricional.proteinas"]}),o.jsx(n.Z,{label:"Gorduras Totais (g)",name:"infoNutricional.gordurasTotais",type:"number",min:"0",step:"0.1",value:S.infoNutricional.gordurasTotais,onChange:k,error:T["infoNutricional.gordurasTotais"]}),o.jsx(n.Z,{label:"Gorduras Saturadas (g)",name:"infoNutricional.gordurasSaturadas",type:"number",min:"0",step:"0.1",value:S.infoNutricional.gordurasSaturadas,onChange:k,error:T["infoNutricional.gordurasSaturadas"]}),o.jsx(n.Z,{label:"Gorduras Trans (g)",name:"infoNutricional.gordurasTrans",type:"number",min:"0",step:"0.1",value:S.infoNutricional.gordurasTrans,onChange:k,error:T["infoNutricional.gordurasTrans"]}),o.jsx(n.Z,{label:"Fibras (g)",name:"infoNutricional.fibras",type:"number",min:"0",step:"0.1",value:S.infoNutricional.fibras,onChange:k,error:T["infoNutricional.fibras"]}),o.jsx(n.Z,{label:"S\xf3dio (mg)",name:"infoNutricional.sodio",type:"number",min:"0",step:"0.1",value:S.infoNutricional.sodio,onChange:k,error:T["infoNutricional.sodio"]})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(d.Z,{type:"button",variant:"outline",onClick:()=>r.push(`/produtos/${w}`),children:"Cancelar"}),o.jsx(d.Z,{type:"submit",variant:"primary",isLoading:x,children:"Atualizar Insumo"})]})]})})]})}},34034:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});var o=a(95344);a(3729);let t=({children:e,variant:r="primary",size:a="md",isLoading:t=!1,fullWidth:i=!1,className:s="",disabled:n,...l})=>{let d=n||t?"opacity-50 cursor-not-allowed":"";return(0,o.jsxs)("button",{className:`inline-flex items-center justify-center rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-[var(--cor-acao)] text-white hover:brightness-90 focus:ring-[var(--cor-acao)]",secondary:"bg-[var(--cor-secundaria)] text-white hover:brightness-90 focus:ring-[var(--cor-secundaria)]",success:"bg-[var(--cor-sucesso)] text-white hover:brightness-90 focus:ring-[var(--cor-sucesso)]",danger:"bg-[var(--cor-erro)] text-white hover:brightness-90 focus:ring-[var(--cor-erro)]",outline:"bg-white text-[var(--cor-texto-principal)] border border-[var(--cor-borda)] hover:bg-gray-50 focus:ring-[var(--cor-acao)]"}[r]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]} ${i?"w-full":""} ${d} ${s}`,disabled:n||t,...l,children:[t&&(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}},10342:(e,r,a)=>{"use strict";a.d(r,{Z:()=>i});var o=a(95344);let t=(0,a(3729).forwardRef)(({label:e,error:r,helperText:a,className:t="",...i},s)=>(0,o.jsxs)("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--cor-texto-principal)"},children:e}),o.jsx("input",{ref:s,className:`w-full input ${r?"border-[var(--cor-erro)]":""} ${t}`,...i}),r&&o.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--cor-erro)"},children:r}),a&&!r&&o.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--cor-texto-secundario)"},children:a})]}));t.displayName="Input";let i=t},98649:(e,r,a)=>{"use strict";a.d(r,{Z:()=>i});var o=a(95344);let t=(0,a(3729).forwardRef)(({label:e,error:r,helperText:a,options:t,className:i="",...s},n)=>(0,o.jsxs)("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,o.jsxs)("select",{ref:n,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 
            ${r?"border-red-500":"border-gray-300"} 
            ${i}`,...s,children:[o.jsx("option",{value:"",children:"Selecione..."}),t.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))]}),r&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),a&&!r&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]}));t.displayName="Select";let i=t},42283:(e,r,a)=>{"use strict";a.d(r,{Z:()=>i});var o=a(95344),t=a(3729);let i=({message:e,onClose:r})=>((0,t.useEffect)(()=>{if(!e)return;let a=setTimeout(r,3e3);return()=>clearTimeout(a)},[e,r]),e)?o.jsx("div",{className:"fixed top-4 right-4 bg-[var(--cor-sucesso)] text-white px-4 py-2 rounded shadow",children:e}):null},6158:(e,r,a)=>{"use strict";a.d(r,{D:()=>n,u:()=>l});var o=a(3729),t=a(94287);let i=async()=>{try{console.log("\uD83D\uDD0D Buscando categorias de produtos...");let e=await fetch("/api/categorias",{headers:(0,t.g)()});if(console.log(`ðŸ“¡ Response status: ${e.status}`),!e.ok){let r=await e.text();throw console.error(`âŒ Erro na API categorias: ${e.status} - ${r}`),Error(`Erro ao buscar categorias: ${e.status}`)}let r=await e.json();return console.log(`âœ… Categorias carregadas: ${r.length}`),r}catch(e){return console.error("âŒ Erro ao buscar categorias da API:",e),[]}},s=[{id:"hortifruti",nome:"Hortifruti"},{id:"carnes",nome:"Carnes"},{id:"laticinios",nome:"Latic\xednios"},{id:"graos",nome:"Gr\xe3os e Cereais"},{id:"bebidas",nome:"Bebidas"},{id:"temperos",nome:"Temperos"},{id:"outros",nome:"Outros"}],n=()=>{let[e,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{n(!0);let e=await i();if(0===e.length){for(let r of s)try{if(!e.find(e=>e.nome===r.nome)){let a=await fetch("/api/categorias",{method:"POST",headers:(0,t.g)(),body:JSON.stringify({nome:r.nome})});if(a.ok){let r=await a.json();e.push(r)}else 409===a.status&&console.log(`Categoria '${r.nome}' j\xe1 existe, pulando...`)}}catch(e){console.error("Erro ao criar categoria padr\xe3o:",e)}e=await i()}console.log("Categorias loaded:",e?.length||0),r(e)}catch(e){console.error("Erro ao carregar categorias:",e),r([])}finally{n(!1)}})()},[]);let l=async a=>{try{let o=await fetch("/api/categorias",{method:"POST",headers:(0,t.g)(),body:JSON.stringify({nome:a})});if(!o.ok)throw Error("Erro ao criar categoria");let i=await o.json(),s=[...e,i];return r(s),i}catch(e){return console.error("Erro ao adicionar categoria:",e),null}},d=async(a,o)=>{try{let i=await fetch(`/api/categorias/${a}`,{method:"PUT",headers:(0,t.g)(),body:JSON.stringify({nome:o})});if(!i.ok)throw Error("Erro ao atualizar categoria");let s=await i.json(),n=e.map(e=>e.id===a?s:e);return r(n),s}catch(e){return console.error("Erro ao atualizar categoria:",e),null}},c=async a=>{try{if(!(await fetch(`/api/categorias/${a}`,{method:"DELETE",headers:(0,t.g)()})).ok)throw Error("Erro ao deletar categoria");let o=e.filter(e=>e.id!==a);return r(o),!0}catch(e){return console.error("Erro ao remover categoria:",e),!1}};return{categorias:e,isLoading:a,adicionarCategoria:l,atualizarCategoria:d,removerCategoria:c,obterCategoriaPorId:r=>e.find(e=>e.id===r)}},l=async e=>{if(!e)return"N\xe3o informado";let r=(await i()).find(r=>r.id===e);return r?r.nome:e}},5175:(e,r,a)=>{"use strict";a.d(r,{x:()=>n});var o=a(3729),t=a(94287);let i=async()=>{try{let e=await fetch("/api/unidades",{headers:(0,t.g)()});if(!e.ok)return s;let r=await e.json(),a=[...s];return r.forEach(e=>{a.find(r=>r.id===e.id)||a.push(e)}),a}catch(e){return console.error("Erro ao buscar unidades da API:",e),s}},s=[{id:"g",nome:"Gramas (g)"},{id:"kg",nome:"Quilogramas (kg)"},{id:"ml",nome:"Mililitros (ml)"},{id:"l",nome:"Litros (l)"},{id:"un",nome:"Unidade"},{id:"cx",nome:"Caixa"},{id:"pct",nome:"Pacote"}],n=()=>{let[e,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{n(!0);let e=await i();console.log("Unidades loaded:",e?.length||0),r(e)}catch(e){console.error("Erro ao carregar unidades de medida:",e),r([])}finally{n(!1)}})()},[]);let l=async(a,o)=>{try{if(s.find(e=>e.id===a))throw Error("J\xe1 existe uma unidade padr\xe3o com esta sigla");let i=await fetch("/api/unidades",{method:"POST",headers:(0,t.g)(),body:JSON.stringify({id:a,nome:o})});if(!i.ok)throw Error("Erro ao criar unidade");let n=await i.json(),l=[...e,n];return r(l),n}catch(e){return console.error("Erro ao adicionar unidade:",e),null}},d=async(a,o)=>{try{if(s.find(e=>e.id===a))throw Error("N\xe3o \xe9 poss\xedvel editar unidades padr\xe3o do sistema");let i=await fetch(`/api/unidades/${a}`,{method:"PUT",headers:(0,t.g)(),body:JSON.stringify({nome:o})});if(!i.ok)throw Error("Erro ao atualizar unidade");let n=await i.json(),l=e.map(e=>e.id===a?n:e);return r(l),n}catch(e){return console.error("Erro ao atualizar unidade:",e),null}},c=async a=>{try{if(s.find(e=>e.id===a))throw Error("N\xe3o \xe9 poss\xedvel deletar unidades padr\xe3o do sistema");if(!(await fetch(`/api/unidades/${a}`,{method:"DELETE",headers:(0,t.g)()})).ok)throw Error("Erro ao deletar unidade");let o=e.filter(e=>e.id!==a);return r(o),!0}catch(e){return console.error("Erro ao remover unidade:",e),!1}};return{unidades:e,isLoading:a,adicionarUnidade:l,atualizarUnidade:d,removerUnidade:c,obterUnidadePorId:r=>e.find(e=>e.id===r)}}},85664:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>i,__esModule:()=>t,default:()=>s});let o=(0,a(86843).createProxy)(String.raw`/workspaces/SistemaChef/src/app/produtos/[id]/editar/page.tsx`),{__esModule:t,$$typeof:i}=o,s=o.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),o=r.X(0,[1638,4485,337,4759,5664],()=>a(20091));module.exports=o})();